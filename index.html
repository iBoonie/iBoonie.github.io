<!doctype html><html lang=en><head><meta charset=utf-8><title>a FuncGodot Manual</title><link rel=icon type=image/x-icon href=images/godot_ranger.svg><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--header_height:55px;--dark_background:#0f0b07}@media only screen and (max-width:900px){li.all{display:block!important;margin-bottom:10px;font-weight:800}header{display:none}ul{padding-left:15px}div.sidenav{position:fixed}div.sidenav>ul{height:100vh!important}ul.list{display:none;font-size:1.2rem}ul.list li{line-height:32px!important}#toggle{display:block!important}blockquote{margin-right:0;margin-left:0}div.separator{padding:20px!important}h1.nextpage{padding-bottom:100px}}body{color:#dbc3bb;font-family:verdana,sans-serif;margin:0;display:grid}.center{text-align:center}.scroller{overflow-x:auto}h1,h2,p{overflow-wrap:anywhere}li,p{line-height:25px}ul{list-style-type:none}a{color:#cf632b;text-decoration:none}a:active,a:hover{color:#e7ab5f}pre{padding:10px;overflow:auto}code{font-size:.9rem;color:#abe7ff}img{max-width:100%;max-height:600px;object-fit:scale-down}blockquote,code.highlight,pre,tr{background-color:var(--dark_background)}blockquote{padding:10px}table{border-collapse:collapse;width:100%}tr.header{background-color:#070700}td{border-style:solid;border-width:2px;padding:10px}b.code{font-style:italic;padding:2px}b.faq{color:#b7876b;font-weight:600;font-style:italic}div.separator{text-align:center;padding:50px}div.separator img{height:300px;opacity:.04;filter:grayscale(1)}h1.nextpage{text-align:center;display:none}#FAQ p[id]:target{background-color:#292929}#FAQ{padding-bottom:50px}header{background-color:#000;text-align:center;height:var(--header_height)}header:hover{cursor:pointer;background-color:#0c0c0c}div.sidenav{display:grid}div.sidenav>ul{margin:0;padding:10px 0 10px 0;box-sizing:border-box;overflow-y:scroll;height:calc(100vh - var(--header_height));grid-column:1}div.sidenav li{padding:0 10px 0 10px}div.sidenav h3{margin:0;padding-top:5px;padding-bottom:5px}div.sidenav ul.list{grid-column:1;background-color:var(--dark_background)}div.sidenav #toggle{grid-column:2;display:none;background-color:var(--dark_background);padding:14px;height:24px;border:solid;border-radius:0 0 10px 0;border-width:0 1px 1px 0}div.sidenav #toggle span{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#cdcdcd;border-radius:3px;z-index:1}div.sidenav #toggle:hover{cursor:pointer}li.all{display:none;text-align:center;border-style:solid;border-width:0 0 1px 0;padding-bottom:10px!important}li.all:hover{cursor:pointer}div.content{background-color:#1f1f1f;grid-column:3;overflow-y:scroll;height:100vh;padding-left:10px;padding-right:10px}div.content div:not(#FAQ) a[href^="#"]{border-bottom:1px dotted}</style></head><body><div class=sidenav><header><img src=images/godot_ranger.svg alt="FuncGodot Ranger" height=50px><img src=images/logo_white.png height=40px alt=FuncGodot></header><ul class=list><li class=all><a>Show all content</a></li><li><a href=#Start>What <i>IS</i> FuncGodot?</a></li><li><h3>Getting Started</h3></li><li><a href=#Install>Installing FuncGodot</a><ul><li><a href=#MapEdCompat>Map Editor Compatibility</a></li><li><a href=#Download>Downloading the Plugin</a></li></ul></li><li><a href=#ProjectConfig>Project Configuration</a></li><li><a href=#FGD>Forge Game Data</a><ul><li><a href=#FGDFile>FGD File Resource</a></li><li><a href=#EntityClass>Entity Class Definitions</a></li><li><a href=#ModifyOnMapBuild>Modifying Entities on Map Build</a></li><li><a href=#DefaultEntities>Default Entities</a></li></ul></li><li><a href=#Textures>Textures</a><ul><li><a href=#ClipAndSkip>Clip and Skip</a></li><li><a href=#WADFiles>WAD Files</a></li><li><a href=#WhyAreMyTexturesBlurry>Why Are My Textures Blurry!?</a></li></ul></li><li><a href=#MapEditorConfig>Map Editor Configuration</a><ul><li><a href=#TrenchBroom>TrenchBroom</a></li><li><a href=#JACK>J.A.C.K.</a></li><li><a href=#NetRadiantCustom>NetRadiant Custom</a></li></ul></li><li><a href=#BuildingMaps>Building Maps</a><ul><li><a href=#InverseScaleFactor>Inverse Scale Factor</a></li><li><a href=#TrenchbroomHierarchy>TrenchBroom Groups Hierarchy</a></li><li><a href=#Building>Building</a></li></ul></li><li><h3>Class Reference</h3></li><li><a href=#LocalConfig>FuncGodot Local Config</a></li><li><a href=#FGDResources>FuncGodot FGD Resources</a><ul><li><a href=#File>FuncGodot FGD File</a></li><li><a href=#Entity>FuncGodot FGD Entity Class</a></li><li><a href=#Base>FuncGodot FGD Base Class</a></li><li><a href=#Solid>FuncGodot FGD Solid Class</a></li><li><a href=#Point>FuncGodot FGD Point Class</a></li><li><a href=#ModelPoint>FuncGodot FGD Model Point Class</a></li></ul></li><li><a href=#KeyValuePairs>Entity Key Value Pairs</a><ul><li><a href=#ApplyingKeyValues>Applying Key Values</a></li><li><a href=#PropertyTypes>Property Types</a></li><li><a href=#Choices>Choices</a></li><li><a href=#BitFlags>Bit Flags</a></li></ul></li><li><a href=#TrenchbroomResources>TrenchBroom Resources</a><ul><li><a href=#GameConfig>TrenchBroom Game Config</a></li><li><a href=#Tag>TrenchBroom Tag</a></li></ul></li><li><a href=#NetradiantCustomResources>NetRadiant Custom Resources</a><ul><li><a href=#GamepackConfig>NetRadiant Custom Gamepack Config</a></li><li><a href=#Shader>NetRadiant Custom Shader</a></li></ul></li><li><a href=#FuncGodotMap>FuncGodot Map</a><ul><li><a href=#MapSettings>FuncGodot Map Settings</a></li></ul></li><li><h3>Tips and Tricks</h3></li><li><a href=#Naming>Naming Patterns</a></li><li><a href=#Worldspawn>Why Not Worldspawn?</a></li><li><a href=#MultipleModels>Conditional Models in TrenchBroom</a></li><li><h3>Additional Learning</h3></li><li><a href=#HelpfulLinks>Helpful Links</a><ul><li><a href=#Godot>Godot and FuncGodot</a></li><li><a href=#TrenchBroomQ>TrenchBroom and Quake</a></li><li><a href=#JACKHL>J.A.C.K. and Half-Life</a></li><li><a href=#Tools>Useful Tools</a></li></ul></li><li><a href=#FAQ>Frequently Asked Questions</a></li></ul><div id=toggle><span></span> <span></span> <span></span></div></div><div class=content><div id=Start main><h1 class=center><img src=images/godot_ranger.svg alt="FuncGodot Ranger" height=128><br>What <i>IS</i> FuncGodot?</h1><p><a href=https://github.com/func-godot/func_godot_plugin target=_blank><b>FuncGodot</b></a> is a plugin for <a href=https://godotengine.org/ target=_blank><b>Godot 4</b></a> that allows users to generate Godot scenes using the <a href=https://quakewiki.org/wiki/Quake_Map_Format target=_blank><b>Quake MAP file format</b></a>. Map files can be made in a variety of editors, the most commonly recommended one being <a href=https://trenchbroom.github.io/ target=_blank><b>TrenchBroom</b></a>. It is a reworking and rewrite of the <a href=https://github.com/QodotPlugin/Qodot target=_blank><b>Qodot</b></a> plugin for Godot 3 and 4.</p><h3><i>It is <em>not</em> a framework.</i></h3><p>FuncGodot will not make your game for you. FuncGodot does not make doors, it does not make players, it does not make buttons. <i>You</i> make the entities and FuncGodot will instantiate them and apply the properties you gave to them in your map file and entity definitions: the rest is up to you.</p><div id=FuncGodotIsNotABspCompiler><h3><i>It is <em>not</em> a BSP Compiler.</i></h3><p>FuncGodot does not compile maps into BSP files. It has no concept of vis, no concept of lit, no concept of bsp. It will not automatically cull faces. Godot does not work like the early BSP engines. You cannot use FuncGodot to map for Godot the same way you map for Quake. What you map is what you get. This makes it more consistent and reliable than a compiled BSP, since you get to choose what faces get culled, how your mesh is separated, and how your collision is generated.</p></div><h3><i>FuncGodot is, at its core, an <em>interpreter</em>.</i></h3><p>FuncGodot is a map parser and geometry generator, utilizing entity definition resources in order to translate map files' entities and their properties into Godot nodes and packed scenes. It can be used for purposes as simple as only generating CSG geometry from the map file to purposes as complex as completing your entire level in your chosen map editor and only needing to click build in Godot. How much FuncGodot builds for you is dependent on how much work you put into defining how to build your maps. What you put in is what you get out.</p><p>Understanding this concept will hopefully put you on the right path forward to being able to use this wonderfully flexible tool to make some incredible games.</p><p>This manual assumes some familiarity with the Godot Engine and your map editor of choice. This manual will only cover them insofar as how they relate to the FuncGodot work flow.</p><br><h1 class=center><img src=images/godambler.svg alt=Godambler height=128><br>Who <i>MADE</i> FuncGodot?</h1><p>FuncGodot was created by <a href=https://github.com/EMBYRDEV target=_blank><b>Hannah "Embyr" Crawford</b></a>, <a href=https://github.com/DeerTears target=_blank><b>Emberlynn Bland</b></a>, and <a href=https://github.com/RhapsodyInGeek target=_blank><b>Tim "RhapsodyInGeek" Maccabe</b></a>, reworked from the <a href=https://github.com/QodotPlugin/Qodot/tree/main target=_blank>Godot 4 port of Qodot</a> by Embyr, with contributions from members of the FuncGodot, Qodot, Godot, and Quake Mapping Communities.</p><p>Both plugins are based on the original <a href=https://github.com/QodotPlugin/qodot-plugin/ target=_blank>Qodot for Godot 3.5</a> created by <a href=https://github.com/Shfty target=_blank><b>Josh "Shifty" Palmer</b></a>.</p><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=Install main><h1 class=center>Installing FuncGodot</h1><h3>Preliminary Requirements</h3><p>FuncGodot's official requirement is currently Godot 4.2. We will always aim to keep FuncGodot compatible with the latest Godot 4.x release. If you manage to make it work on an older release of Godot 4, awesome! But you're on your own if you run into issues.</p><p>FuncGodot is written in pure GDScript and as such has no other dependencies.</p><p>This manual assumes you have an intermediate level of knowledge with Godot and your chosen map editor.</p><hr><div id=MapEdCompat><h3>Map Editor Compatibility</h3><p>FuncGodot directly supports the following editors with configuration resources:</p><ul><li>TrenchBroom 2024</li><li>NetRadiant Custom 1.6</li></ul><p>FGD outputs have also been tested with these editors:</p><ul><li>J.A.C.K.</li></ul><p>FuncGodot is designed to be as map editor agnostic as possible. If you use an editor that can output Quake or Half-Life 1 format map files, please let us know on GitHub or Discord so we can try our best to either support it directly or document the configuration process!</p></div><hr><div id=Download><h3>Downloading the Plugin</h3><p>There are 3 places to download FuncGodot. The first two places are both found on the <a href=https://github.com/func-godot/func_godot_plugin target=_blank><b>FuncGodot GitHub Repository</b></a>. The first location is the Code Download, and it is always the most up to date version of the plugin. It includes all merges, including both feature updates and bug fixes. Sometimes this version can be significantly up to date, but may also contain less refined features than the other options below.</p><p class=center><img src=images/guide_install_github_code.png alt="An image displaying where to find the GitHub Code Download. It shows a green button that says 'Code' with an open menu. At the bottom of the menu is a button that says 'Download Zip'."></p><p>The second location is the GitHub repository's Releases. This is the second most up to date download and is considered the official "Stable Release" of the plugin.</p><p class=center><img src=images/guide_install_github_releases.png alt="An image displaying where to find the GitHub Stable Release. It shows a circled location on the right side of the GitHub repository page that says 'Releases'."></p><p>The final location is the Godot Asset Library. While the intent is to keep the Asset Library release in line with the GitHub Stable Release, sometimes these releases can be "desynced" for one reason or another. We're a small team of volunteers here, so please be patient with us!</p><p>Our intent is to keep the Stable Releases as reliable as possible, so typically only critical fixes will be pushed with some urgency while new features or quality of life improvements tend to simmer a bit more in the code base.</p><p>In any case, pick the download option that suits you best. If you downloaded the plugin from GitHub, extract the <i>func_godot</i> folder to your Godot project's <i>addons</i> folder. If you downloaded from the Asset Library, it should do this for you automatically. Once the plugin is copied to your project, remember to enable the plugin in your Project Settings.</p><p class=center><img src=images/guide_install_enable_plugin.png alt="Godot Project Settings window, Plugins tab. FuncGodot is listed and enabled."></p></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=ProjectConfig main><h1 class=center>Project Configuration</h1><h3>Directory Structure</h3><p>Designing a directory structure for your game is its own art, and the layout of your project files can depend greatly on the kind of game you're making. That said, it is generally recommended you create an organization that splits off your <b>TrenchBroom resources</b> from the rest of your <b>Godot assets</b>.</p><p>If you're using TrenchBroom, you may already be aware it has a handy backup feature where it creates an autosave folder to periodically save backups of your map file. Less useful is the tendency for Godot to import these backups as well.</p><p>However, Godot has its own handy feature to combat this. Any directory with a <b>.gdignore</b> file will not be scanned and imported by Godot. To save yourself some headache later, open the <i>autosave</i> sub-directory in your operating system's file explorer. If using Windows, make sure you have <i>File Name Extensions</i> enabled under the <i>View</i> tab. Create a new text document in the sub-directory and rename it <i>.gdignore</i>, exactly like that with the <i>.txt</i> extension removed.</p><p class=center><img src=images/guide_project_config_gdignore.png></p><p>And just like that, we won't have to deal with Godot constantly importing hundreds of backup map files from our project! You can do this for any directory that you don't want Godot to import files from, such as the folder that contains all of your display models intended to be used only with your map editor.</p><h3>FuncGodot Local Config</h3><p>FuncGodot has the option of using a <a href=#LocalConfig><b>FuncGodotLocalConfig</b></a> resource to create local project wide settings for your other FuncGodot resources. These settings are applied only to your machine, in order to better facilitate working with a team that may not have the same drive or directory setup or even the same map editor as you yourself use.</p><p>You won't create the FuncGodotLocalConfig resource for your project, as this resource doesn't actually save anything to itself directly. Instead you will use the pre-made <i>func_godot_local_config.tres</i> resource found in the <i>addons/func_godot/</i> folder.</p><p class=center><img src=images/guide_project_config_res_loc.png alt="Location of func_godot_local_config.tres in the Godot project File System."></p><h3>Local Config Properties</h3><p>Viewing this resource's properties in the inspector, you'll be greeted with some options. We'll ignore the <i>Export Func Godot Settings</i> property for now.</p><p class=center><img src=images/ref_local_config.png alt="FuncGodotLocalConfig resource inspector."></p><p>For the <b>FGD Output Folder</b>, you'll want to locate your map editor's game configuration folder or installation folder. Create a sub folder for your game's configuration and set the <b>FGD Output Folder</b> to that sub-folder. This might look something like <i>C:/GameDev/TrenchBroom/Games/MyGame/</i> or <i>C:/GameDev/J.A.C.K/MyGame/</i>. This tells FuncGodot where to save generated configuration and FGD files when you click on their export button.</p><p>The <b>Trenchbroom Game Config Folder</b> is the location of your game's TrenchBroom Game Config folder. This might (but doesn't have to be) the same as your <i>FGD Output Folder</i>. When you export your <a href=#GameConfig>TrenchBroomGameConfig</a> resource, it will automatically export the FGD file to this folder as well, overriding the <i>FGD Output Folder</i> property.</p><p>The <b>Netradiant Custom Gamepack Folder</b> is a little different, in that it should point to your NetRadiant Custom's <i>gamepacks</i> folder (eg: <i>C:/GameDev/NetRadiant Custom/gamepacks/</i>). This will also override the <i>FGD Output Folder</i> when you export your <a href=#GamepackConfig>NetRadiantCustomGamepackConfig</a> resource, as NetRadiant Custom splits up gamepack configurations across several folders and files.</p><p>The <b>Map Editor Game Path</b> refers to what your Map Editor considers the location of your project. This might look something like <i>C:/GameDev/MyGodotProject/</i> or <i>C:/GameDev/MyGodotProject/trenchbroom/</i>. The intended use for this is to streamline certain FGD resource paths, like the <a href=#ModelPoint><b>FuncGodotFGDModelPointClass</b></a>'s model export location.</p><p>The <b>Game Path Models Folder</b> is the default folder path relative to your Map Editor Game Path that tells FuncGodot where to save generated model files to. For example, with a Map Editor Game Path value of <i>C:/GameDev/MyGodotProject/trenchbroom/</i> and a Game Path Models Folder value of <i>models</i>, the generated model file will be saved to <i>C:/GameDev/MyGodotProject/trenchbroom/models/</i>. Currently only used by <i>FuncGodotFGDModelPointClass</i>.</p><p>The <b>Default Inverse Scale Factor</b> setting doesn't affect <i>FuncGodotMapSettings</i> resources or how the map builds. It currently only affects scaling display models for <i>FuncGodotFGDModelPointClass</i> definitions in map editors other than TrenchBroom.</p><h3>Exporting the Project Config</h3><p>Remember that <i>Export Func Godot Settings</i> property I told you to ignore earlier? Once you have your settings in place, go ahead and click it. It will automatically generate a <i>MyGameFuncGodotConfig.json</i> file in your <a href=https://docs.godotengine.org/en/stable/tutorials/io/data_paths.html#accessing-persistent-user-data-user target=_blank>Godot project's user data folder</a>.</p><blockquote><i>NOTE: You need to run your project at least once before attempting to export settings, so that the </i>user:// <i>folder can be created by Godot! Otherwise you will run into an error and the config file will not export!</i></blockquote><p>This is how we keep local settings local. Upon opening your project, FuncGodot will automatically update <i>func_godot_local_config.tres</i> to load the data from the generated JSON file found in your user data folder, and setting the resource's <i>Export</i> property to true will overwrite that file with the new settings. These settings are not saved to source control, allowing teams to work together more easily and more flexibly.</p><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=FGD main><h1 class=center>Forge Game Data</h1><blockquote cite=https://book.leveldesignbook.com/appendix/resources/formats/fgd#history><p>FGD stands for "Forge Game Data", leftover from when the Half-Life 2 level editor Hammer used to be the Half-Life 1 editor Worldcraft, and before that when it was a Quake tool called Forge.</p><footer><cite><a href=https://book.leveldesignbook.com/appendix/resources/formats/fgd#history target=_blank><b>The Level Design Book</b></a></cite></footer></blockquote><p>FuncGodot utilizes <a href=#FGDResources><b>FuncGodotFGD Resources</b></a> to act as a translation guide for the map build process. These resources are largely separated into two different types: the <b>FuncGodotFGDFile</b> and the <b>FuncGodotFGDEntityClass</b>. Think of the FGD File as a dictionary, and the FGD Entity Classes as the entries.</p><p class=center><img src=images/guide_fgd_res_list.png alt="FuncGodot FGD Resource List."></p><hr><div id=FGDFile><h2>FGD File Resource</h2><p>Some of you may only want to build map geometry with some control over collision and occlusion, and prefer to add all of your lights, actors, scripting, etc... in Godot directly. To that end there is a basic default <i>func_godot_fgd.tres</i> included with FuncGodot. You can find it under <i>addons/func_godot/fgd/func_godot_fgd.tres</i>.</p><p class=center><img src=images/guide_fgd_res_loc.png alt="func_godot_fgd.tres location."></p><p>This is the default FGD file set in the <a href=#MapSettings><b>FuncGodotMapSettings</b></a> resource. The basic entity definitions included with it are <i>Worldspawn</i>, <i>func_detail</i>, <i>func_detail_illusionary</i>, <i>func_illusionary</i>, and <i>Phong</i>. We'll go over what each of these entity types are a little farther below.</p><p>But what if you want to add your own custom entity types? It's always best practice to create your own FGD File resource and <b><i>NEVER</i></b> a good idea to just modify the pre-existing default FGD File. Any time FuncGodot is updated, it will overwrite the <i>func_godot_fgd.tres</i> that comes with it and erase any changes you've made to that resource. While the goal is to keep the default FGD File as basic as possible, we cannot guarantee it won't be changed at some point in the future.</p><p>That said, it is possible to include the default FuncGodot FGD File into your own as a Base FGD. Create a new <i>FuncGodotFGDFile</i> resource and examine it in the inspector.</p><p class=center><img src=images/ref_fgd_file.png alt="FuncGodotFGDFile resource properties."></p><p>The <b>Export File</b> property does exactly what you might think: it generates and saves your FGD file to the <b>Map Editor Game Config Folder</b> set by the <a href=#LocalConfig>FuncGodot Local Config</a>. Use this whenever you need to update your FGD.</p><p>The next property, <b>Model Key Word Supported</b>, is dependent upon which map editor you use. Point class entities in map editors can have display models assigned to them according to their FGD definitions. Most map editors seem to use the "studio" key word to define the model path, but TrenchBroom instead optionally allows the "model" key word while also including additional display options and expressions. When set to <i>false</i>, FuncGodot will omit entity definition meta properties using the "model" key word, in order to prevent errors in your chosen map editor. When exporting the FGD File through a <a href=#GameConfig>TrenchBroom Game Config</a> resource the setting will be overridden to <i>true</i>. See the <a href=https://developer.valvesoftware.com/wiki/FGD#Class_Types_and_Properties target=_blank>Valve Developer Wiki</a> for more information.</p><p><b>Fgd Name</b> should be self evident: this will be your exported FGD's filename, minus the file extension. Best practice would be to set this to either your game's name or its acronym.</p><p><b>Base Fgd Files</b> is an array of <b>FuncGodotFGDFile</b> resources that will be prepended to our final FGD file output. It is not necessary to export these base FGD Files; only the FGD File they are added to needs to be exported and the rest will be built by and merged into what you could consider your "Master FGD File".<br></p><blockquote><i>NOTE: This is <b>not</b> where you would put your <b>FuncGodotFGDBaseClass</b> resources! Those are not the same as FuncGodotFGDFile resources and are considered entities! More information on FuncGodotFGDBaseClass found below.</i></blockquote><p>To add the <i>func_godot_fgd.tres</i> as a base FGD file to your custom FGD file, all you need to do is locate <i>func_godot_fgd.tres</i> and drag and drop it onto the <b>Base Fgd Files</b> array in the inspector.</p><p class=center><img src=images/guide_fgd_base_fgd.png alt="FuncGodotFGDFile base FGD example."></p><p>The last property is <b>Entity Definitions</b>. This is where you'll drop all of your custom entity resources to be built or instanced by FuncGodot. Let's take a look at what a populated one looks like by viewing the default <i>func_godot_fgd.tres</i> in the inspector.</p><p class=center><img src=images/guide_fgd_func_godot_fgd.png alt="FuncGodotFGDFile default FGD."></p></div><hr><div id=EntityClass><h2>Entity Class Definitions</h2><p>In terms of how to map with the Quake Map File > FuncGodot > Godot pipeline, it's best to think of the entities in Quake design terms. That is to say, <i>everything</i> is an entity: the player, the enemies, the ambient sounds, the doors, the lifts, the trigger volumes, the map geometry itself... all of these should be thought of as <b>entities</b>.</p><p>All map editors and FuncGodot support at least 2 different kinds of entities: <b>Solid (Brush) Entities</b> and <b>Point Entities</b>. Using <i>FuncGodotFGDSolidClass</i> and <i>FuncGodotFGDPointClass</i> resources, you can generate any type of Godot node and apply any script to it.</p><p>Every entity is comprised of 2 things: <b>Metadata</b> and <b>Key Value Pairs</b>.</p><p><i>Metadata</i> tells the map editor how to display your entity, things like bounding box color or display models for Point Entities, but have no effect in Godot.</p><p><i>Key Value Pairs</i> on the other hand can be thought of as your entity's properties. In a map file, all entities are comprised of <b>Key Value Pairs</b>. Each entity will <i>always</i> have a <b>classname</b>; this classname is what FuncGodot uses to determine what node or packed scene is generated and how upon building the <i>FuncGodotMap</i>.</p><p>The <i>FuncGodotMap</i> attempts to call two methods on each entity at the end of the build process. As an added advantage of using these calls, you can guarantee that all FuncGodotMap generated nodes now exist and can reference each other.</p></div><hr><div id=ModifyOnMapBuild><h2>Modifying Entities on Map Build</h2><p class=center><img src=images/guide_fgd_apply_props.png alt="FuncGodotMap GDScript method showing application of 'func_godot_properties' and callback of '_func_godot_apply_properties' and '_func_godot_build_complete'."></p><p>If you decide you want to make modifications to your generated entities on map build using any of the following methods, you'll need to make sure that your entity's script is set as a <a href=https://docs.godotengine.org/en/stable/tutorials/plugins/running_code_in_the_editor.html target=_blank></a><code>@tool</code> script.</p><p>The first method call is to <code>_func_godot_apply_properties(entity_properties: Dictionary)</code>. Because <code>_func_godot_apply_properties</code> passes the entity properties in the function, you do not need to declare a <i>func_godot_properties</i> dictionary in your node script; instead, just apply your properties as needed in this callback.</p><p>After every entity has called <code>_func_godot_apply_properties</code>, FuncGodot will cycle through all of them again and attempt to call <code>_func_godot_build_complete()</code> as a deferred call. Since we're calling this method deferred after every entity has already called the previous method, we can guarantee any nodes generated by our entities in <code>_func_godot_apply_properties</code> can be referenced during <i>_func_godot_build_complete</i>.</p><p>Additionally upon building, all of the entity's key value pairs will be added to the generated node's <code>func_godot_properties</code> Dictionary (provided that the property is set as an exported variant).</p><p>We'll examine this <i>FuncGeo</i> class as a demonstration of the relationships between the FuncGodotFGDBaseClass, the FuncGodotFGDSolidClass, the func_geo brush entity in the map editor, and the final generated Godot FuncGeo StaticBody3D node.</p><p>The image on the left depicts a <i>Base Class</i> resource that contains other base classes to accumulate <i>Class Properties</i>. The image on the right is a <i>Solid Class</i> resource containing that Base Class and defines our FuncGeo entity.</p><p class=center><img src=images/guide_fgd_funcgeo0.png alt="Func Base Class"> <img src=images/guide_fgd_funcgeo1.png alt="FuncGeo Solid Class"></p><p class=center>This is our FuncGeo entity's properties as they appear in TrenchBroom.</p><p class=center><img src=images/guide_fgd_funcgeo2.png alt="func_geo brush entity properties in TrenchBroom"></p><p class=center>The generated FuncGeo node's properties in the inspector. See how our <i>Func Godot Properties</i> Dictionary matches our Class Properties from our map editor.</p><p class=center><img src=images/guide_fgd_funcgeo4.png alt="Generated FuncGeo node in Godot"></p><p>With FuncGodot, your entity does not necessarily need a tool script. And even if you provide it a tool script, it does not need a <code>func_godot_properties</code> dictionary. FuncGodot will still generate and instantiate these entities without providing any properties. However, to take full advantage of FuncGodot's power it is highly recommended that you provide your nodes with both.</p><p>See the chapters on <a href=#Entity><b>FuncGodotFGDEntityClass</b></a> resources and <a href=#KeyValuePairs>Entity Key Value Pairs</a> for more information.</p></div><hr><div id=DefaultEntities><h2>Default Entities</h2><p>All default FuncGodot entities, except for <i>Phong</i>, are FuncGodotFGDSolidClass entities. All of the SolidClass entities are very similar, mostly differing in occlusion and collision.</p><ul><li><b>Phong : </b>A FuncGodotFGDBaseClass that provides <i>_phong</i> and <i>_phong_angle</i> properties to most of the entities below. See the <a href=https://en.wikipedia.org/wiki/Phong_shading target=_blank>Wikipedia article on Phong Shading</a> for quick primer.<br></li><blockquote><i>NOTE: Some map editors are strict about entity definition order! To stay safe, make sure that any entity classes that inherit from a base class come <b>after</b> that base class. This includes other base classes! Otherwise you may run into issues where properties are not properly inherited.</i></blockquote><li><b>worldspawn : </b>A geometry class that mimics the Worldspawn entity found in Quake and Half-Life. In the FuncGodot implementation, Worldspawn generates a single <a href=https://docs.godotengine.org/en/stable/classes/class_staticbody3d.html target=_blank>StaticBody3D</a> with a child <a href=https://docs.godotengine.org/en/stable/classes/class_meshinstance3d.html target=_blank>MeshInstance3D</a> and multiple convex <a href=https://docs.godotengine.org/en/stable/classes/class_collisionshape3d.html target=_blank>CollisionShape3D</a> children. It also generates an <a href=https://docs.godotengine.org/en/stable/classes/class_occluderinstance3d.html target=_blank>OccluderInstance3D</a> with an <a href=https://docs.godotengine.org/en/stable/classes/class_arrayoccluder3d.html target=_blank>ArrayOccluder3D</a>.<br>Under normal circumstances, there can only ever be one Worldspawn entity in a map file. While there technically are ways to create multiple Worldspawn entities this manual will not explore that possibility.</li><br><li><b>func_geo : </b>Identical to Worldspawn, with the exception being that you can (and should) create multiple func_geos. See <a href=#Worldspawn>Why Not Worldspawn?</a> for more information.</li><br><li><b>func_detail : </b>Almost identical to <i>func_geo</i>, with the exception that they do not generate OccluderInstance3D children.</li><br><li><b>func_illusionary : </b>Geometry that has no collision. It generates a <a href=https://docs.godotengine.org/en/stable/classes/class_node3d.html target=_blank>Node3D</a>, a MeshInstance3D child, and an OccluderInstance3D child.</li><br><li><b>func_detail_illusionary : </b>Identical to func_illusionary, except that it does not generate an OccluderInstance3D child.</li><br></ul></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=Textures main><h1 class=center>Textures</h1><h2>How Textures Work In FuncGodot</h2><p>If you take a look at a <i>.map</i> file, you'll see that it's just a text file describing the makeup of your map and doesn't actually store any other data, including texture images. Let's look at this example of a <i>Solid Entity</i> in a map file:</p><p class=center><img src=images/guide_tex_solident.png alt="Solid Entity Example"></p><pre>
<code>// entity 1
{
    "classname" "func_detail"
    // brush 0
    {
        ( -32 -64 -16 ) ( -32 -63 -16 ) ( -32 -64 -15 ) __TB_empty [ 0 -1 0 0 ] [ 0 0 -1 0 ] 0 1 1
        ( -64 -32 -16 ) ( -64 -32 -15 ) ( -63 -32 -16 ) __TB_empty [ 1 0 0 0 ] [ 0 0 -1 0 ] 0 1 1
        ( -64 -64 -32 ) ( -63 -64 -32 ) ( -64 -63 -32 ) special/clip [ -1 0 0 0 ] [ 0 -1 0 0 ] 0 1 1
        ( 64 64 32 ) ( 64 65 32 ) ( 65 64 32 ) __TB_empty [ 1 0 0 0 ] [ 0 -1 0 0 ] 0 1 1
        ( 64 32 16 ) ( 65 32 16 ) ( 64 32 17 ) special/clip [ -1 0 0 0 ] [ 0 0 -1 0 ] 0 1 1
        ( 32 64 16 ) ( 32 64 17 ) ( 32 65 16 ) special/clip [ 0 1 0 0 ] [ 0 0 -1 0 ] 0 1 1
    }
}</code>
    </pre><p>This is a <i>func_detail</i> entity from the default <i>FuncGodot.fgd</i>. As you can see, the map file structure is pretty straight-forward. This particular map uses the Valve 220 format, having additional options for UV mapping. Each line in a brush definition describes a face on the brush, and within that you can see that our texture is defined as just its location relative to the game's texture folder or map's WAD file.</p><p><i>But if that's the case, how does FuncGodot know what file to use?</i></p><p><a href=#MapSettings>FuncGodot Map Settings</a> have several properties that help define and apply textures to your meshes on build:</p><ul><li><b>Base Texture Dir :</b> Root folder where your Godot map textures are located</li><br><li><b>Texture File Extensions :</b> The extensions to search for if no matching material is found</li><br><li><b>Texture Wads :</b> Array of WAD resources to search through</li><br><li><b>Material File Extension :</b> Format for custom texture materials, can be <i>.tres</i>, <i>.res</i> or <i>.material</i></li><br><li><b>Default Material :</b> The default material that FuncGodot builds your map's materials from</li><br><li><b>Default Material Albedo Uniform :</b> If the default material is a <a href=https://docs.godotengine.org/en/stable/classes/class_shadermaterial.html target=_blank>ShaderMaterial</a> rather than <a href=https://docs.godotengine.org/en/stable/classes/class_standardmaterial3d.html target=_blank>StandardMaterial3D</a>, this is the shader uniform that provides the albedo texture</li><li><b>Save Generated Materials :</b> Save automatically generated materials to disk, allowing reuse across multiple FuncGodot maps. FuncGodot will skip saving materials using clip, skip, or missing textures.<br><i>NOTE: once saved, materials will no longer inherit from the </i>Default Material<i>. If you want to make any changes to their settings you will have to either do so manually or delete the materials and allow FuncGodot to rebuild and resave them.</i></li></ul><p class=center><img src=images/ref_func_godot_map_settings.png alt="FuncGodotMapSettings properties"></p><p>FuncGodot's first step is to search the <i>Base Texture Dir</i> for a prebuilt material as defined by the brush face's texture name in the format defined by <i>Material File Extension</i>.</p><p>If it does not find this prebuilt material, it will search the <i>Base Texture Dir</i> for the <i>Texture2D</i> resource by the brush face's texture name using any one of the extensions defined by <i>Texture File Extensions</i>. If it finds the Texture2D, it will create a copy of the <i>Default Material</i> and apply the Texture2D as the duplicated material's albedo.</p><p>If it does not find the Texture2D, then it will use the <i>default_texture.png</i> found in the <i>addons/func_godot/textures/</i> folder.</p><p class=center><img src=images/default_texture.png alt="Default texture"></p><p>Once the material generation is completed, you can optionally have FuncGodot save generated materials so they can be reused by multiple FuncGodotMaps. Otherwise each FuncGodotMap will have its own unique material for each texture used in the map.</p><hr><div id=AutomaticPBRGeneration><h2>Automatic PBR Generation</h2><p>You may have noticed that we skipped over a few settings before, all of them with the suffic "Map Pattern". FuncGodot has the ability to automatically generate PBR materials on build. Each of the "Map Pattern" properties tell FuncGodot's Texture Loader how to find each PBR map for our texture.</p><p><i>What's with all the %s everywhere?</i></p><p>It's a placeholder token that gets replaced during texture loading. Each pattern requires two <i>%s</i> tokens. The first token is for the texture's name as it appears in the map file. The second token is for the file extension; this is replaced as the Texture Loader cycles through the Map Settings' Texture File Extensions searching for your texture. So if Texture Loader is looking for the normal map of a texture with the name "rock" and our Map Settings' Normal Map Pattern is "%s_normal.%s" and it is currently checking for the "png" Texture File Extension, then it will be looking to see if the texture resource "rock_normal.png" exists, and if so it will be applied to the Map Settings' Default Material if it is a StandardMaterial3D.</p></div><hr><div id=ClipAndSkip><h2>Clip and Skip Textures</h2><h3>Mapping for <del>Quake</del> Godot</h3><p>We started off this manual with the point that <a href=#FuncGodotIsNotABspCompiler>FuncGodot is <i>not</i> a BSP compiler</a>. If we map like we do in traditional Quake mapping...</p><p align=center><img src=images/guide_tex_bsp1.png width=45%> <img src=images/guide_tex_notbsp1.png width=45%></p><p>... we don't get the same result.</p><p align=center><img src=images/guide_tex_bsp2.jpg width=45%> <img src=images/guide_tex_notbsp2.png width=45%></p><p>Instead we need to change our approach.</p><p>For those not familiar with traditional Quake mapping, the finished MAP gets compiled into a BSP file to be read by the engine. The compiling process calculates visibility between all of the rooms of your map and removes all faces that won't be viewed due to being outside the map. That means maps must be sealed completely, but you're also allowed to be lazy with brush texturing since if a face is "outside" the map it will get culled.</p><p>With Godot we need to think of these brushes as what they'll become in-engine: composited <a href=https://docs.godotengine.org/en/stable/classes/class_meshinstance3d.html target=_blank>MeshInstance3Ds</a> and <a href=https://docs.godotengine.org/en/stable/classes/class_collisionshape3d.html target=_blank>CollisionShape3Ds</a>. If we want to achieve the culled result on the left, we'll need to change the way we do things on the right.</p><h3>Skip It</h3><p class=center><img src=images/clip.png alt="Clip texture"> <img src=images/skip.png alt="Skip texture"></p><p>The <b>Clip</b> and <b>Skip</b> textures are arguably our most important textures when mapping for Godot. You can assign any texture's name to the Clip and Skip properties of the FuncGodotMapSettings resource. But what do they do?</p><p>The Clip texture will remove any face textured with it from the generated <i>MeshInstance3D</i>. The Skip texture behaves the same way if the Solid Entity's Collision Type is set to <i>Convex</i>. However, if the Solid Entity's Collision Type is set to <i>Concave</i>, this also removes the Skip textured faces from the generated <a href=https://docs.godotengine.org/en/stable/classes/class_collisionpolygon3d.html target=_blank>CollisionPolygonShape3D</a>.</p><p>Just keep in mind the general rule of thumb: if you want your entities to collide with the brush, use Clip...</p><p align=center><img src=images/guide_tex_clip_example.png width=48%><img src=images/guide_tex_clip_example2.png width=48%></p><p>... and if you want them to pass through, use Skip <sub>(with Concave collision)</sub>.</p><p align=center><img src=images/guide_tex_skip_example.png width=48%> <img src=images/guide_tex_skip_example2.png width=48%></p></div><hr><div id=WADFiles><h2>WAD Files</h2><p>FuncGodot provides the option to use <a href=https://quakewiki.org/wiki/Texture_Wad target=_blank>Texture WAD files</a> for your map materials. It's generally not recommended if it can be helped, but support for loose texture images varies from map editor to map editor.</p><p>To use a WAD file with your <a href=#FuncGodotMap>FuncGodotMap</a> just add your imported WAD resource to the map node's <i>Texture Wads</i> array.</p><p>The neat thing about how FuncGodot handles map textures is that we can technically use a completely different folder in TrenchBroom and even different image formats than the location and formats we keep them in Godot. This can be useful for advanced users, but you may want to just keep all of your textures unified.</p></div><hr><div id=WhyAreMyTexturesBlurry><h2><i>Why Are My Textures Blurry!?</i></h2><p>You may be encountering at least one of two issues: texture compression and / or material sampling settings.</p><p>Make sure your texture resource is set to either <i>Lossless</i> or <i>VRAM uncompressed</i>. Please refer to the Godot documentation on <a href=https://docs.godotengine.org/en/stable/tutorials/assets_pipeline/importing_images.html#compress-mode target=_blank>texture compression</a>.</p><p>If you had created your own materials for your map, check that the material's or texture's <i>Sampling Filter</i> is set to <b><i>Nearest Mipmap</i></b>. Please refer to the Godot documentation on <a href=https://docs.godotengine.org/en/stable/classes/class_basematerial3d.html#enum-basematerial3d-texturefilter target=_blank>texture filtering</a>.</p></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=MapEditorConfig main><h1 class=center>Map Editor Configuration</h1><p>In order to map for Godot in your chosen map editor, you'll need to tell your map editor about your game. Each map editor has its own method of doing this. While FuncGodot can import any map file using the Quake Map format, official support is currently limited to only those that support the FGD format.</p><hr><div id=TrenchBroom><h2 class=center><a href=https://trenchbroom.github.io/ target=_blank>TrenchBroom</a></h2><p class=center><img src=images/me_tb.png alt="TrenchBroom logo" height=128px></p><p>TrenchBroom is the most commonly recommended editor for FuncGodot, with <a href=#TrenchbroomResources target=_self>multiple resources</a> dedicated to configuring it. The primary configuration resource is the <i>TrenchBroomGameConfig</i>, with the <i>TrenchBroomTag</i> providing additional quality of life options in the editor.</p><p>You'll need a TrenchBroom Game Config resource in order to build and export a game configuration file for TrenchBroom. Let's take a look at the resource properties:</p><p class=center><img src=images/ref_tb_gameconfig.png alt="TrenchBroomGameConfig properties"></p><p>Most of these properties should be fairly obvious in their purpose. The FGD File should be your master FGD that contains all of your other base FGDs and entities. Entity Scale only scales the display models.</p><p>Brush Tags and Brushface Tags are strictly for TrenchBroom and have no effect in Godot. They can affect shortcut keys and have transparency effects applied to them, along with a few other features. FuncGodot comes with a few pre-made common tags. Feel free to use them in your own GameConfig resources.</p><p>Exporting the Game Config will use the directory set in your <a href=#LocalConfig>Local Configuration's <i>Trenchbroom Game Config Folder</i></a>. Consult the <a href=https://trenchbroom.github.io/manual/latest/#game_configuration_files target=_blank>TrenchBroom Manual's Game Configuration documentation</a> for more information. Once you've exported your Game Config, open up TrenchBroom and click <i>New Map</i>. You should now see your project in the games list.</p><p class=center><img src=images/guide_me_tb_cfg_2.png alt="TrenchBroom Config 2"></p><p>You'll need to set the game path so that TrenchBroom can find your game's textures and any models if you created some for it. Open TrenchBroom's preferences and set your game's path to the one you set to <i>Map Editor Game Path</i> with the Local Configuration.</p><p class=center><img src=images/guide_me_tb_cfg_3.png alt="TrenchBroom Config 3"></p><p>Now you should be ready to start mapping for Godot with TrenchBroom!</p><p class=center><img src=images/guide_me_tb_cfg_4.png alt="TrenchBroom Config 3"></p></div><hr><div id=JACK><h2 class=center><a href=https://crystice.com/jack/ target=_blank>J.A.C.K.</a></h2><p class=center><img src=images/me_jack.png alt="J.A.C.K. logo" height=128px></p><p>Due to how games are configured in J.A.C.K., FuncGodot does not have any dedicated resources for it but the process is still fairly simple.</p><p>Make sure your <a href=#LocalConfig>Local Configuration's <i>FGD Output Folder</i></a> is pointing to your game's folder in J.A.C.K.'s game configuration folder. When you export an FGD file, FuncGodot will print in the Godot Output where it was saved to.</p><p class=center><img src=images/guide_me_jack_0.png alt="J.A.C.K. Config 1"></p><p>Once exported, you'll need to add your game to the Game Configurations list. Be sure to add your newly exported FGD as well.</p><p class=center><img src=images/guide_me_jack_1.png alt="J.A.C.K. Config 2"> <img src=images/guide_me_jack_2.png alt="J.A.C.K. Config 3"></p><p>Lastly you'll want to set your Base Game and Source Maps directories.</p><p class=center><img src=images/guide_me_jack_3.png alt="J.A.C.K. Config 4"></p><p>When it comes to textures, something to keep in mind is that you do not have to use the same exact texture files from your project. You can set up a WAD file for use with J.A.C.K. but then in your Godot project have loose texture files and premade materials. As long as the relative texture paths match without the file extensions, FuncGodot will be able to select the correct textures. That said, FuncGodot <i>does</i> support using WAD files with your maps. Use whichever method is right for your project.</p><p>And with that, you should be all set to start mapping in J.A.C.K.!</p><p class=center><img src=images/guide_me_jack_4.png alt="J.A.C.K. Config 5"></p></div><hr><div id=NetRadiantCustom><h2 class=center><a href=https://github.com/Garux/netradiant-custom target=_blank>NetRadiant Custom</a></h2><p class=center><img src=images/me_nrc.png alt="NetRadiant Custom logo" height=128px></p><p>NetRadiant Custom receives FuncGodot support through both local configuration and <a href=#NetradiantCustomResources>dedicated resources</a>. The primary configuration resource is the <i>NetRadiantCustomGamepackConfig</i>. The <i>NetRadiantCustomShader</i> resource offers additional options for texture display in the editor. It is highly recommended that you familiarize yourself with NetRadiant Custom before attempting to use it with FuncGodot.</p><p>You'll need a NetRadiant Custom Gamepack Config resource in order to build and export a gamepack configuration for NetRadiant Custom. Let's take a look at the resource properties:</p><p class=center><img src=images/ref_nrc_gamepackconfig.png alt="NetRadiantCustomGamepackConfig properties"></p><p>The <b>Gamepack Name</b> is the most important one to get right. This will be the name of your gamepack folder, your base game folder, and your gamepack file. The <i>Gamepack Name <b>MUST</b></i> be all lower case with <i><b>NO</b></i> special characters. Bad things can happen otherwise!</p><p>The <b>Game Name</b> and <b>Fgd File</b> properties should be fairly obvious. Make sure that the FGD file you choose is the master FGD that contains all of your other base FGDs and entities.</p><p>The <b>Base Game Path</b> is the folder containing your maps and textures, relative to your project directory without <i>res://</i>. Leave this blank to use your project's root directory. If you do use a separate mapping folder within your project make sure that you follow the same formatting as the <i>Gamepack Name</i>: all lower case and no special characters.</p><p>The <b>Netradiant Custom Shaders</b> array is a resource array for... <a href=#Shader>NetRadiantCustomShader</a> resources! These will be compiled into a <i>.shader</i> file included with the rest of your gamepack configuration. Simply empty the array if you don't wish to use any special shaders. This only affects NetRadiant Custom and has no effect on your Godot shaders and materials.</p><p>The <b>Texture Types</b>, <b>Model Types</b>, and <b>Sound Types</b> arrays are the lists of compatible file types that NetRadiant Custom will attempt to look for. It's generally fine to leave this as is and is offered for the sake of more advanced users.</p><p>The <b>Default Scale</b> sets the default texture scale.</p><p>The <b>Skip</b> and <b>Clip Texture</b> properties set the texture paths for a number of different shader settings in the gamepack, including <i>caulk</i>> and <i>nodraw</i>.</p><p>Exporting the Gamepack Config will use the directory set in your <a href=#LocalConfig>Local Configuration's <i>NetRadiant Custom Gamepacks Folder</i></a>. After you've built the gamepack, open up NetRadiant Custom.</p><p>Once open, you'll want to go to <b><i>Edit > Preferences > Global > Game</i></b>. If you did everything correctly so far you should find your game in the list. Select it and then select <b>Okay</b>. NetRadiant Custom will need to restart.</p><p class=center><img src=images/guide_me_nrc_1.png alt="NetRadiant Custom setup 1"></p><p class=center>You'll be prompted to find your game's engine path. Use your Godot project's root folder.</p><p class=center><img src=images/guide_me_nrc_2.png alt="NetRadiant Custom setup 2"></p><p class=center>Lastly, you'll want to go to <b><i>Edit > Preferences > Settings > Brush</i></b>, then change <b>New map Brush Type</b> to <b>Valve 220</b>.</p><p class=center><img src=images/guide_me_nrc_4.png alt="NetRadiant Custom setup 2"></p><p class=center>Now you should be ready to start mapping for Godot with NetRadiant Custom!</p><p class=center><img src=images/guide_me_nrc_3.png alt="NetRadiant Custom setup 3"></p></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=BuildingMaps main><h1 class=center>Building Maps</h1><p>You've configured FuncGodot. You've configured your map editor. You've made your first test map of what will undoudbtedly be countless thousands. It's time to build.</p><p>When you get back into Godot, create a new scene. In that scene make your root node a base <a href=https://docs.godotengine.org/en/stable/classes/class_node.html target=_blank>Node</a> type. Call it whatever you'd like.</p><p>After that create a <a href=#FuncGodotMap>FuncGodotMap</a> node as a child of this node.</p><p class=center><img src=images/guide_build_1.png alt="Building the map 1"></p><p>Why do we make the FuncGodot Map a child and not the root? When a FuncGodot Map builds its scene it frees <b><i>all</i></b> of its children, including manually placed or edited nodes. Any work you did within the FuncGodot Map's branch of your Scene Tree will be erased when you rebuild the map (and you <i>will</i> rebuild it). Instead, do your post build customizations as siblings to the FuncGodot Map rather than children.</p><p>Let's take a look at our FuncGodot Map's properties.</p><p class=center><img src=images/ref_func_godot_map.png alt="FuncGodotMap properties"></p><p>Not much here. We have <b>Local Map File</b> and <b>Global Map File</b>. These point to the map file you want to build. The <i>Global Map File</i> will override the <i>Local Map File</i>. If you're working with a team and using source control it's probably best to stick with <i>Local</i> (res://) so you don't have to have matching drive and directory structures leading to the map files. The <i>Global</i> option is there partly as a potential Runtime build option.</p><p>The <b>Map Settings</b> property points to a <a href=#MapSettings>FuncGodotMapSettings</a> resource. FuncGodot uses this resource to define how your maps get built. Not all maps need to use the same Map Settings; it's possible to get clever and use different Map Settings resources on the same map file and get completely different results like referencing completely different textures or completely different entities utilizing common relative texture paths or class names.</p><p>Lastly we have some <b>Build</b> options. You can generally leave these alone, but they can be helpful if you find yourself having unexpected problems.</p><p>Let's take a quick peek at our <i>Map Settings</i>.</p><p class=center><img src=images/guide_build_2.png alt="Building the map 2"></p><p>We went over most of these properties in the <a href=#Textures>Textures Chapter</a>, so we'll just go over the the ones we didn't cover: <b>Inverse Scale Factor</b>, <b>Entity Fgd</b>, <b>UV Unwrap Texel Size</b>, and <b>Use Trenchbroom Groups Hierarchy</b>.</p><p>The <b>Entity Fgd</b> property should be fairly obvious; like the map editor configurations, make sure this is the master FGD that contains all of your base FGDs and entity definitions. <b>UV Unwrap Texel Size</b> is for lightmapping; <a href=https://docs.godotengine.org/en/stable/tutorials/3d/global_illumination/using_lightmap_gi.html#setting-up target=_blank>consult the Godot documentation</a> for more information.</p><hr><div id=InverseScaleFactor><h2>Inverse Scale Factor</h2><p>One of the most impactful properties is the <b>Inverse Scale Factor</b>. It tells FuncGodot how big or small your map should be built. As it's an <i>inverse</i> scale, this means larger numbers will build smaller maps. How do you decide on the right inverse scale for your game though? To figure it out, it helps to know what you're scaling against.</p><p>In Godot, units are measured by meters. By default the modeling program Blender is as well. Quake maps however are all measured in <i>Quake Units</i>. Incidentally, a pixel in a map texture rendered at 100% scale on a brush face is equal to 1 Quake Unit.</p><p>How many pixels does a meter equal out to? 137? 22? The truth is that it's arbitrary; it really depends on what you want the average resolution of your game to be at. The <i>FuncGodot Map Settings</i> default to 32 because this puts a 1.5-2 meter tall player at a similar texture resolution to Quake. Feel free to experiment with this value to find the right scale for your game.</p><p class=center><img src=images/guide_build_isf1.png alt="32x32 Quake Unit Block" height=300px> <img src=images/guide_build_isf2.png alt="1x1 Godot Unit Block" height=300px></p><p><i>NOTE: Accounting for the Inverse Scale Factor in your class scripts will better allow you to design your entities within the map editor, i.e: using Quake Units to determine a moving platforms travel distance in your map editor and on import letting your node script translate that value into Godot Units using your Inverse Scale Factor.</i></p></div><hr><div id=TrenchbroomHierarchy><h2>Use Trenchbroom Groups Hierarchy</h2><p>TrenchBroom has some unique features in the form of <i>Layers</i> and <i>Groups</i> (not to be confused with <i>func_group</i>, but also they're func_groups; they're weird). They add a convenient level of organization to the map making process.</p><p>In some cases mappers may want to design their maps in such a way as too create a hierarchy for their nodes using TrenchBroom Layers and Groups. FuncGodot offers this option using the <b>Use Trenchbroom Groups Hierarchy</b> property.</p><p>Let's say you created two layers and two groups of brush entities, both groups on separate layers.</p><p class=center><img src=images/guide_build_groups1.png alt="TrenchBroom screenshot depicting 2 layers named Texas and Massachusetts and 2 groups of brush entities named Richardson and Arkham."></p><p class=center>If <i>Use Trenchbroom Groups Hierarchy</i> is disabled, your built FuncGodotMap scene structure will look something like this:</p><p class=center><img src=images/guide_build_groups2.png alt="Scene tree showing a flat entity hierarchy"></p><p class=center>However, if you build your FuncGodotMap with <i>Use Trenchbroom Groups Hierarchy</i> enabled, you'll get this instead:</p><p class=center><img src=images/guide_build_groups3.png alt="Scene tree showing a multi level entity hierarchy based upon the map layers and groups"></p></div><hr><div id=Building><h2>Building</h2><p>You have your map file selected. You have your map settings ready. You've decided on an inverse scale factor and, if you're using TrenchBroom, you've decided whether you want a flat or multi-level scene tree hierarchy. It's time to build the map. With your <i>FuncGodotMap</i> node selected the toolbar at the top of the editor should change.</p><p class=center><img src=images/ref_func_godot_map2.png alt="FuncGodotMap buttons"></p><p>The <b>Build</b> button will build the map scene and apply all the appropriate ownership and settings to the map scene.</p><p><b>Unwrap UV2</b> can be used after the build process; it cycles through every Solid Entity with the <i>Use In Baked Light</i> property enabled in their definition and unwraps the UV2 of their MeshInstance3D children. If you're using baked lightmaps you'll need to press this button after every build but before every lightmap bake.</p><p>Go ahead and perform a <i>Build</i> and marvel in your master level craftsmanship.</p><p class=center><img src=images/guide_build_3.png></p><p class=center>Congratulations! You've built your first FuncGodot Map!</p></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=LocalConfig main><h1 class=center>FuncGodotLocalConfig</h1><p><img src=images/ref_local_config.png></p><p>Local machine project wide settings. Can define global defaults for some FuncGodot properties.</p><h3>DO NOT CREATE A NEW RESOURCE!</h3><p>This resource works by saving a <i>MyGameFuncGodotConfig.json</i> configuration file to your game's <a href=https://docs.godotengine.org/en/stable/tutorials/io/data_paths.html#accessing-persistent-user-data-user target=_blank><b><i>user://</i></b></a> folder and pulling the properties from that config file rather than this resource. Use the premade <i>addons/func_godot/func_godot_local_config.tres</i> instead.</p><blockquote><i>NOTE: You need to run your project at least once before attempting to export settings, so that the </i>user:// <i>folder can be created by Godot! Otherwise you will run into an error and the config file will not export!</i></blockquote><p>Handling local project configuration settings in this way means they need to be set individually on every machine you load your project onto. These settings are <i>not</i> saved to source control. The benefit is that this allows teams to more easily work together even with drastically different tool installation paths.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Export Func Godot Settings</td><td>Bool</td><td>Button to save the local machine project configuration settings in your game's <i>user://</i> folder.</td></tr><tr><td>Fgd Output Folder</td><td>String, Global Directory</td><td>Global directory path that FGD files save to when exported from their properties. Overridden when exported from a game configuration resource like TrenchBroomGameConfig.</td></tr><tr><td>Trenchbroom Game Config Folder</td><td>String, Global Directory</td><td>Global directory path where your TrenchBroom game configuration should be saved to. Consult the <a href=https://trenchbroom.github.io/manual/latest/#game_configuration_files target=_blank>TrenchBroom Manual's Game Configuration documentation</a> for more information.</td></tr><tr><td>Netradiant Custom Gamepacks Folder</td><td>String, Global Directory</td><td>Global directory path where your NetRadiant Custom gamepacks are saved. On Windows this is the <i>gamepacks</i> folder in your NetRadiant Custom installation.</td></tr><tr><td>Map Editor Game Path</td><td>String, Global Directory</td><td>Global directory path to your mapping folder where all of your mapping assets exist. This is usually either your project folder or a subfolder within it.</td></tr><tr><td>Game Path Models Folder</td><td>String</td><td>Relative directory path from your Map Editor Game Path to a subfolder containing any display models you might use for your map editor. Currently only used by <a href=#ModelPoint>FuncGodot FGD Model Point Class</a>.</td></tr><tr><td>Default Inverse Scale Factor</td><td>Float</td><td><a href=#InverseScaleFactor>Scale factor</a> that affects how <a href=#ModelPoint>FuncGodot FGD Model Point Class</a> entities scale their map editor display models. Not used with TrenchBroom, use <a href=#GameConfig>TrenchBroom Game Config</a><br>'s <i>Entity Scale</i> expression instead.</td></tr></table></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=FGDResources main><h1 class=center>FuncGodot FGD Resources</h1><div id=File><h2>FuncGodotFGDFile</h2><p><img src=images/ref_fgd_file.png></p><p>Resource file used to express a set of <i>FuncGodotFGDEntity</i> definitions. Can be exported as an FGD file for use with a Quake map editor. Used in conjunction with a <a href=#MapSettings>FuncGodotMapSettings</a> resource to generate nodes in a <a href=#FuncGodotMap>FuncGodotMap</a> node.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Export File</td><td>Bool</td><td>Used as a button to build and export the FGD file. Automatically sets to off after exporting.</td></tr><tr class=header><td>Map Editor</td><td></td><td></td></tr><tr><td>Model Key Word Supported</td><td>Bool</td><td>Some map editors do not support the "model" key word and require the "studio" key word instead. If you get errors in your map editor, try changing this setting. This setting is overridden when the FGD is built via the Game Config resource.</td></tr><tr class=header><td>FGD</td><td></td><td></td></tr><tr><td>Fgd Name</td><td>String</td><td>FGD output filename without the extension.</td></tr><tr><td>Base Fgd Files</td><td>Array[Resource]</td><td>Array of <i>FuncGodotFGDFile</i> resources to include in FGD file output. All of the entities included with these FuncGodotFGDFile resources will be prepended to the outputted FGD file.</td></tr><tr><td>Entity Definitions</td><td>Array[Resource]</td><td>Array of resources that inherit from <i>FuncGodotFGDEntityClass</i>. This array defines the entities that will be added to the exported FGD file and the nodes that will be generated in a <i>FuncGodotMap</i>.</td></tr></table></div></div><hr><div id=Entity><h2>FuncGodotFGDEntityClass</h2><p><img src=images/ref_fgd_entity.png></p><p>Base entity definition class. Not to be used directly, use <i>FuncGodotFGDBaseClass</i>, <i>FuncGodotFGDSolidClass</i>, or <i>FuncGodotFGDPointClass</i> instead.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr class=header><td>Entity Definition</td><td></td><td></td></tr><tr><td>Classname</td><td>String</td><td>Entity classname. <b><i>This is a required field in all entity types</i></b> as it is parsed by both the map editor and by FuncGodot on map build.</td></tr><tr><td>Description</td><td>String</td><td>Entity description that appears in the map editor. Not required.</td></tr><tr><td>Func Godot Internal</td><td>Bool</td><td>Entity does not get written to the exported FGD. Entity is only used for <i>FuncGodotMap</i> build process.</td></tr><tr><td>Base Classes</td><td>Array[Resource]</td><td>Array of <i>FuncGodotFGDBaseClass</i> resources to inherit <i>Class Properties</i> and <i>Class Descriptions</i> from.</td></tr><tr><td>Class Properties</td><td>Dictionary</td><td>Key value pair properties that will appear in the map editor. After building the FuncGodotMap in Godot, these properties will be added to a <i>func_godot_properties</i> Dictionary that gets applied to the generated node, as long as that node is a <i>@tool</i> script with an exported <i>func_godot_properties</i> Dictionary. See <a href=#KeyValuePairs>Entity Key Value Pairs</a> for more information.</td></tr><tr><td>Class Property Descriptions</td><td>Dictionary</td><td>Map editor descriptions for the previously defined key value pair properties. Not required for added properties but recommended.</td></tr><tr><td>Meta Properties</td><td>Dictionary</td><td>Appearance properties for the map editor, eg: size, color, studio, model, etc...<br>See the <a href=https://developer.valvesoftware.com/wiki/FGD#Entity_Description target=_blank>Valve Developer FGD</a> and <a href=https://trenchbroom.github.io/manual/latest/#display-models-for-entities target=_blank>TrenchBroom</a> documentation for more information.</td></tr><tr class=header><td>Node Generation</td><td></td><td></td></tr><tr><td>Node Class</td><td>String</td><td>Node to generate on map build. This can be a built-in Godot class or a GDExtension class.<br><br>For GDScript classes use the built-in Godot class they extend from (eg: <i>MyCustom2 > MyCustom1 > Node3D</i> would be "Node3D"). Use the <i>Script Class</i> property found in <i>Solid Class</i> and <i>Point Class</i> to apply your custom GDScript classes to generated nodes.<br><br>For Point Class entities that use Scene File instantiation leave this blank.<br><br>There is no restriction on what Node Classes can be generated.</td></tr><tr><td>Name Property</td><td>String</td><td>Optional. Specifies a class property belonging to this entity that will be used to name the generated node upon map build. The node is renamed to <code>"entity" + name_property</code> prior to being added to the <i>SceneTree</i> and applying <code>func_godot_properties</code>.<br>Overrides the <i>Entity Name Property</i> setting in <a href=#MapSettings>FuncGodotMapSettings</a>.<br><br><i>NOTE: Node names should be unique, otherwise you may run into unexpected behavior!</i></td></tr></table></div></div><hr><div id=Base><h2>FuncGodotFGDBaseClass</h2><p>Special inheritance class for <i>Solid Class</i> and <i>Point Class</i> entity definitions. Useful for adding shared or common properties and descriptions. Does not have any unique properties on its own but is defined separately to facilitate FGD building and lookup.</p></div><hr><div id=Solid><h2>FuncGodotFGDSolidClass</h2><p><img src=images/ref_fgd_solid.png></p><p>FGD SolidClass entity definition, used to define brush entities. A <i>MeshInstance3D</i> will be generated by <i>FuncGodotMap</i> according to this definition's Visual Build settings. If FuncGodotFGDSolidClass <i>Node Class</i> inherits <i>CollisionObject3D</i> then one or more <i>CollisionShape3D</i> nodes will be generated according to Collision Build settings.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Spawn Type</td><td>SpawnType</td><td>Determines how FuncGodot generates both the mesh and the collision in regards to vertice positioning and combining.<br><ul><li><b>WORLDSPAWN : </b>Builds the geometry of this entity without regard to its center position. Upon build completion all geometry will be offset by this entity's true position. Recommend only use with <i>worldspawn</i> entity.</li><li><b>MERGE WORLDSPAWN : </b>This entity's geometry is merged with the <i>worldspawn</i> entity and this entity is removed. Behavior mimics <i>func_group</i> in modern Quake compilers.</li><li><b>ENTITY : </b>This entity is built as its own object. It finds the center of the entity by averaging the positions of all vertices, using the global result of this as its position.<br><i>NOTE: This is not always the center of the mesh's AABB.</i></li></ul></td></tr><tr><td>Origin Type</td><td>OriginType</td><td>Determines how this Solid Class utilizes the <code>"origin"</code> key value pair to find its position. Only valid if <i>Spawn Type</i> is set to ENTITY.<br><ul><li><b>IGNORE : </b>Ignore origin property and only use averaged brush vertices for positioning.</li><li><b>ABSOLUTE : </b>Use origin property for position center, ignoring brush vertice positions.</li><li><b>RELATIVE : </b>Calculate position center using origin as an offset to averaged brush vertice positions.</li></ul></td></tr><tr class=header><td>Visual Build</td><td></td><td></td></tr><tr><td>Build Visuals</td><td>Bool</td><td>Controls whether a MeshInstance3D is built for this Solid Class.</td></tr><tr><td>Use In Baked Light</td><td>Bool</td><td>Sets generated MeshInstance3D to be available for UV2 unwrapping after FuncGodotMap build. Utilized in baked lightmapping.</td></tr><tr><td>Shadow Casting Setting</td><td><a href=https://docs.godotengine.org/en/stable/classes/class_geometryinstance3d.html#enum-geometryinstance3d-shadowcastingsetting target=_blank>ShadowCastingSetting</a></td><td>Shadow casting setting allows for further lightmapping customization. See the <a href=https://docs.godotengine.org/en/stable/classes/class_geometryinstance3d.html#enum-geometryinstance3d-shadowcastingsetting target=_blank>Godot documentation</a> for more information.</td></tr><tr><td>Build Occlusion</td><td>Bool</td><td>Automatically build <a href=https://docs.godotengine.org/en/stable/classes/class_occluderinstance3d.html target=_blank>OccluderInstance3D nodes</a> for this entity. See the <a href=https://docs.godotengine.org/en/stable/tutorials/3d/occlusion_culling.html target=_blank>Godot documentation on Occlusion Culling</a> for more information.</td></tr><tr><td>Render Layers</td><td>Int, 3D Render Flags</td><td>This Solid Class' MeshInstance3D will only be visible for Camera3Ds whose cull mask includes any of these render layers.</td></tr><tr class=header><td>Collision Build</td><td></td><td></td></tr><tr><td>Collision Shape Type</td><td>CollisionShapeType</td><td>Controls how collisions are built for this Solid Class.<br><ul><li><b>None : </b>No collision shape is built. Useful for decorative geometry like vines, hanging wires, grass, etc...</li><li><b><a href=https://docs.godotengine.org/en/stable/tutorials/physics/collision_shapes_3d.html#convex-collision-shapes target=_blank>Convex</a> : </b>Will build a Convex CollisionShape3D for each brush used to make this Solid Class. Required for non-StaticBody3D nodes like Area3D and RigidBody3D.</li><li><b><a href=https://docs.godotengine.org/en/stable/tutorials/physics/collision_shapes_3d.html#concave-or-trimesh-collision-shapes target=_blank>Concave</a> : </b>Will build a single Concave CollisionShape3D from the entire set of brushes. Skips brush faces textured with the FuncGodotMapSettings' <i>Skip Texture</i>.</li></ul><br>See <a href=https://docs.godotengine.org/en/stable/tutorials/physics/collision_shapes_3d.html#performance-caveats target=_blank>the Godot documentation</a> to make an informed decision on what collision type would work best for this entity for your game's needs.</td></tr><tr><td>Collision Layer</td><td>Int, 3D Physics Flags</td><td>The physics layers this Solid Class can be detected in.</td></tr><tr><td>Collision Mask</td><td>Int, 3D Physics Flags</td><td>The physics layers this Solid Class scans.</td></tr><tr><td>Collision Priority</td><td>Float</td><td>The priority used to solve colliding when penetration occurs. The higher the priority is, the lower the penetration into the SolidClass will be. This can for example be used to prevent the player from breaking through the boundaries of a level.</td></tr><tr><td>Collision Shape Margin</td><td>Float</td><td>The collision margin for the Solid Class' collision shapes. Not used in Godot Physics. See <a href=https://docs.godotengine.org/en/stable/classes/class_shape3d.html#class-shape3d-property-margin target=_blank>Shape3D documentation</a> for details.</td></tr><tr class=header><td>Scripting</td><td></td><td></td></tr><tr><td>Script Class</td><td><a href=https://docs.godotengine.org/en/stable/classes/class_script.html target=_blank>Script</a></td><td>An optional script file to attach to the node generated on map build.</td></tr></table></div></div><hr><div id=Point><h2>FuncGodotFGDPointClass</h2><p><img src=images/ref_fgd_point.png></p><p>FGD Point Class entity definition, used to define point entities. PointClass entities can use either the <i>Node Class</i> or the <i>Scene File</i> property to tell a <i>FuncGodotMap</i> what to generate on map build.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr class=header><td>Scene</td><td></td><td></td></tr><tr><td>Scene File</td><td><a href=https://docs.godotengine.org/en/stable/classes/class_packedscene.html target=_blank>PackedScene</a></td><td>An optional scene file to instantiate on map build. Overrides <i>Node Class</i> and <i>Script Class</i>.</td></tr><tr class=header><td>Scripting</td><td></td><td></td></tr><tr><td>Script Class</td><td><a href=https://docs.godotengine.org/en/stable/classes/class_script.html target=_blank>Script</a></td><td>An optional script file to attach to the node generated on map build.</td></tr><tr class=header><td>Build</td><td></td><td></td></tr><tr><td>Apply Rotation On Map Build</td><td>Bool</td><td>Toggles whether entity will use <i>angles</i>, <i>mangle</i>, or <i>angle</i> to determine rotations on FuncGodotMap build, prioritizing the key value pairs in that order. Set to <i>false</i> if you would like to define how the generated node is rotated yourself.</td></tr></table></div></div><hr><div id=ModelPoint><h2>FuncGodotFGDModelPointClass</h2><p><img src=images/ref_fgd_modelpoint.png></p><p>A special type of <a href=#Point>FuncGodotFGDPointClass</a> entity that can automatically generate a special simplified, scaled, and reoriented GLB model file for the map editor display. Not supported by editors without GLB / GLTF support.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Target Map Editor</td><td>TargetMapEditor</td><td>Modifies whether the entity definition uses the <code>studio</code> or <code>model</code> keyword, and how it applies display model scaling. Options are <i>GENERIC</i> or <i>TRENCHBROOM</i>.</td></tr><tr><td>Models Sub Folder</td><td>String</td><td>Optional display model export sub folder relative to the game path and models folder set in <a href=#LocalConfig>FuncGodotLocalConfig</a>.</td></tr><tr><td>Scale Expression</td><td>String</td><td>Scale expression applied to model. Only used by TrenchBroom. See the <a href=https://trenchbroom.github.io/manual/latest/#display-models-for-entities target=_blank>TrenchBroom Documentation</a> for more information.<br>To set the scale for other editors, set the <i>Default Inverse Scale</i> setting in <a href=#LocalConfig>FuncGodotLocalConfig</a>.</td></tr><tr><td>Generate Size Property</td><td>Bool</td><td>Model Point Class can override the <i>size</i> meta property by auto-generating a value from the meshes' <a href=https://docs.godotengine.org/en/stable/classes/class_aabb.html target=_blank>AABB</a>. Proper generation requires <i>scale_expression</i> set to a float or Vector3.<br><b>WARNING:</b> Generated size property unlikely to align cleanly to grid!</td></tr><tr><td>Generate GD Ignore File</td><td>Bool</td><td>Creates a .gdignore file in the model export folder to prevent Godot importing the display models. Only needs to be generated once.</td></tr></table></div></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=KeyValuePairs main><h1 class=center>Entity Key Value Pairs</h1><p>Key Value Pairs are the most powerful aspect of FuncGodot. All of the <i>Class Properties</i> set in a <a href=#Entity>FuncGodotFGDEntity</a> definition get added to the corresponding entity placed in the map editor.</p><p>Key Value Pairs are defined in a <i>FuncGodotFGDEntityClass</i> resource's <i>Class Properties</i> dictionary. A Class Property is defined with a key String and a value of many of the <a href=https://docs.godotengine.org/en/stable/classes/class_variant.html target=_blank>Godot Variant Types</a> (see <a href=#PropertyTypes>Property Types</a> below for a full list). The value set becomes both the default value and the Variant type the FuncGodotMap applies to that property on map build.</p><p class=center><img src=images/ref_kvp_classprops.png></p><p>Additionally, you can define a property description. With the exception of <a href=#Choices>Choices</a> and <a href=#BitFlags>Bit Flags</a>, property descriptions are created by matching a key from <i>Class Properties</i> to the <i>Class Property Descriptions</i> dictionary and setting a <b>String</b> value for the description.</p><p class=center><img src=images/ref_kvp_classdescs.png></p><p class=center>The result as it appears in TrenchBroom:</p><p class=center><img src=images/ref_kvp_classprops_tb.png></p><p class=center>If you plan on using J.A.C.K. you may want to use the descriptions as proper names for the keys rather than actual descriptions. The same entity's properties as they appear in J.A.C.K.:</p><p class=center><img src=images/ref_kvp_classprops_jack1.png width=48%> <img src=images/ref_kvp_classprops_jack2.png width=48%></p><p>Once the corresponding node is generated by a <a href=#FuncGodotMap>FuncGodotMap</a>, these key value pairs are then applied to the generated node's <i>func_godot_properties</i> dictionary. Additionally, if you add undefined key value pairs in your map editor, these too will be added to your node's <i>func_godot_properties</i> dictionary.</p><blockquote><i>NOTE: Entity keys that are not given values will have their default values applied to the generated node's</i> func_godot_properties <i>dictionary.</i></blockquote><hr><div id=ApplyingKeyValues><h2>Applying Key Values</h2><p>It's pretty easy to apply entity key value pairs to nodes generated by FuncGodot. You have one property and two methods that you can use: the Dictionary <code class=bold>func_godot_properties</code>, the method <code class=bold>_func_godot_apply_properties(entity_properties: Dictionary)</code>, and the deferred method <code class=bold>_func_godot_build_complete()</code>.</p><p>After the entity is built, FuncGodot will check if the entity contains a <code>func_godot_properties</code> Dictionary, and if it exists it will apply the translated key value pairs as a Dictionary to this variable. In order for the application to persist at Runtime or after closing your scene, you'll need to make sure the variable is an <code>@export</code> variable.</p><p>Use <code>_func_godot_apply_properties</code> to apply your key value pairs to your node, as they are passed through the <code>_func_godot_properties</code> argument in the function.</p><p><code>_func_godot_build_complete</code> is a deferred call that happens after every entity has called <code>_func_godot_apply_properties</code>, making it safe to reference any nodes generated during <code>_func_godot_apply_properties</code>.</p><p class=center><img src=images/guide_fgd_apply_props.png alt="FuncGodotMap GDScript method showing application of 'func_godot_properties' and callback of '_func_godot_apply_properties' and '_func_godot_build_complete'."></p><p>You are allowed to limit yourself to only the application methods you're interested in. Mix and match these options as you see fit for your entities.</p></div><hr><div id=PropertyTypes><h2>Property Types</h2><p>FuncGodot supports many of the <a href=https://docs.godotengine.org/en/stable/classes/class_%40globalscope.html#enum-globalscope-variant-type target=_blank>Godot Variant types</a>. Consult the <a href=https://developer.valvesoftware.com/wiki/FGD#Keyvalues target=_blank>key values section of the FGD page on the Valve Developer Wiki</a> for more information on FGD value types.</p><br><div class=scroller><table class=props><tr class=header><td>Godot Variant Type</td><td>FGD Value Type</td><td>Notes</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_int.html target=_blank>Int</a></td><td>integer</td><td></td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_float.html target=_blank>Float</a></td><td>float</td><td></td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_string.html target=_blank>String</a></td><td>string</td><td></td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_bool.html target=_blank>Bool</a></td><td>choices</td><td>Automatically sets up options "No" and "Yes" with values "0" and "1" respectively.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_vector2.html target=_blank>Vector2</a></td><td>string</td><td>Vector2 key values are represented as string "X Y". Can accept floating point values.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_vector2i.html target=_blank>Vector2i</a></td><td>string</td><td>Vector2i key values are represented as string "X Y". Can only accept integer values.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_vector3.html target=_blank>Vector3</a></td><td>string</td><td>Vector3 key values are represented as string "X Y Z". Can accept floating point values.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_vector3i.html target=_blank>Vector3i</a></td><td>string</td><td>Vector3i key values are represented as string "X Y Z". Can only accept integer values.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_vector4.html target=_blank>Vector4</a></td><td>string</td><td>Vector4 key values are represented as string "W X Y Z". Can accept floating point values.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_vector4i.html target=_blank>Vector4i</a></td><td>string</td><td>Vector4i key values are represented as string "W X Y Z". Can only accept integer values.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_color.html target=_blank>Color</a></td><td>string</td><td>Color key values are represented as string "R G B". In some Map Editors they may offer a color picker.<br>Alpha is always set to 1.0. If alpha requires specification, use an additional float property.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_dictionary.html target=_blank>Dictionary</a></td><td>choices</td><td>Returns an <a href=https://docs.godotengine.org/en/stable/classes/class_int.html target=_blank>Int</a> or <a href=https://docs.godotengine.org/en/stable/classes/class_string.html target=_blank>String</a> on map build.<br>Dictionaries are a special property case. See the <a href=#Choices>Choices</a> section for more information.</td></tr><tr><td><a href=https://docs.godotengine.org/en/stable/classes/class_array.html target=_blank>Array</a></td><td>flags</td><td>Returns an <a href=https://docs.godotengine.org/en/stable/classes/class_int.html target=_blank>Int</a> on map build to be used as a bit mask.<br>Somewhat complicated to set up and only flexibly supported in TrenchBroom.<br>See the <a href=#BitFlags>Bit Flags</a> section for more information.</td></tr></table></div></div><hr><div id=Choices><h2>Choices</h2><p>The <b>choices</b> key value type allows you to open a dropdown menu of predefined options in your map editor. They are defined in Godot by choosing a value type of dictionary, with each key being the option text and each value being the property value. Keys are always Strings, but values can be either Int or String.</p><p class=center><img src=images/ref_kvp_choices1.png></p><p>Normally the default value is set in Class Properties, but for Choices we can't do this (not without a fair amount of trouble). Instead we use Class Property Descriptions to set a default value. We do this by creating an Array with 2 elements: the first element is a String serving as the description; the second element is the default choice and should be either an Int or String matching one of the option values defined in Class Properties.</p><p>Once written to the FGD you should get a something like this in your map editor:</p><p class=center><img src=images/ref_kvp_choices2.png></p><blockquote><i>NOTE: While Bool types always generate a choices key value type, you don't need to set them up any differently than any other property. FuncGodot will automatically format Bool types for you on FGD export.</i></blockquote></div><hr><div id=BitFlags><h2>Bit Flags</h2><p>Bit flags are the most complex key value type to set up, but offer a lot in simplifying complex comparisons and systems in your game scripts.</p><p>To set up a bit flags property, choose Array as the value's Variant type. Each element of the Array will be an Array as well, representing a single Flag. Each Flag Array is composed of 3 elements: a String serving as the Flag Description, an Int declaring the Flag's Bit Value, and an Int representing the Flag's default state.</p><p>Bit Flag properties do not utilize descriptions so there is no need to add one to the entity's Class Property Descriptions dictionary.</p><p class=center><img src=images/ref_kvp_bitflags1.png></p><p>Once exported, you should get something like this:</p><p class=center><img src=images/ref_kvp_bitflags_tb.png width=48%> <img src=images/ref_kvp_bitflags_jack.png width=48%>></p><p class=center><sub>Left, Trenchbroom; Right, J.A.C.K.; Not shown: NetRadiant Custom because I'm lazy, but it's pretty similar to J.A.C.K. in this regard.</sub></p><p>Even though Godot uses 64 bit signed integers, map editors only seem to offer support for up to 24 bit flags. This is largely an artifact of the Quake engine, specifically its Quake C programming language. QuakeC doesn't have an integer type and instead used a 32 bit floating point number. The result was that only 24 bits remained to be used in bitwise operations. The Half-Life engine inherited this limitation, and subsequent Quake and Valve map editors designed their bit flag menus with this limitation in mind.</p><p>In TrenchBroom this isn't too much of a problem as you can have multiple bit flag key value pairs. Unfortunately other map editors are designed to only support one group of flags that they assume to be <b>spawnflags</b>, no matter what they're called in the FGD. J.A.C.K. will just overwrite spawnflags. NetRadiant Custom will throw errors if it detects flag values with matching bits and be unable to open. All key value types of flags will be compiled into the entity's Flags property and saved in the map file with the key "spawnflags".</p><p>If you're using another map editor other than TrenchBroom, you can still use multiple flags key value pairs or inherit them across multiple Base Classes. Just make sure each flags property applied to an entity has a unique bit value and expect FuncGodot to build it as a compiled <i>spawnflags</i> bitmask.</p><p class=center><img src=images/ref_kvp_bitflags2.png></p></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=TrenchbroomResources main><h1 class=center>TrenchBroom Resources</h1><p>TrenchBroom has the strongest support from FuncGodot, and as such is the recommended map editor for use with the plugin. FuncGodot has optional support for TrenchBroom Layers and Groups, and TrenchBroom supports multiple bit flag key value pairs. To aid with TrenchBroom support, FuncGodot offers two different resources.</p><hr><div id=GameConfig><h2>TrenchBroomGameConfig</h2><p><img src=images/ref_tb_gameconfig.png></p><p>Defines a game in TrenchBroom to express a set of entity definitions and editor behaviors.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Export File</td><td>Bool</td><td>Button to export / update this game's configuration in the TrenchBroom Game Config Folder.</td></tr><tr><td>Game Name</td><td>String</td><td>Name of the game in TrenchBroom's game list.</td></tr><tr><td>Icon</td><td>Texture2D</td><td>Icon for TrenchBroom's game list.</td></tr><tr><td>Map Formats</td><td>Array[Dictionary]</td><td>Available map formats when creating a new map in TrenchBroom. The order of elements in the array is the order TrenchBroom will list the available formats. The <i>initialmap</i> key value is optional.</td></tr><tr><td>Texture Exclusion Patterns</td><td>Array[String]</td><td>Textures with names matching these patterns will be hidden from TrenchBroom. Useful for hiding PBR maps and animation frames.</td></tr><tr><td>Fgd File</td><td>FuncGodotFGDFile</td><td>FGD resource to include with this game. If using multiple FGD resources, this should be the master FGD that contains them in the <i>base_fgd_files</i> resource array.</td></tr><tr><td>Entity Scale</td><td>String</td><td>Scale expression that modifies the default display scale of entities in TrenchBroom. See the <a href=https://trenchbroom.github.io/manual/latest/#game_configuration_files_entities target=_blank>TrenchBroom Documentation</a> for more information.</td></tr><tr><td>Default Uv Scale</td><td>Vector2</td><td>Scale of textures on new brushes and when UV scale is reset.</td></tr><tr class=header><td>Editor Hint Tags</td><td></td><td></td></tr><tr><td>Brush Tags</td><td>Array[Resource]</td><td>TrenchBroomTag resources that apply to brush entities.</td></tr><tr><td>Brushface Tags</td><td>Array[Resource]</td><td>TrenchBroomTag resources that apply to brush faces.</td></tr></table></div></div><hr><div id=Tag><h2>TrenchBroomTag</h2><p><img src=images/ref_tb_tag.png></p><p>Pattern matching tags to enable a number of features in TrenchBroom, including display appearance, menu filtering options, and keyboard shortcuts. This resource gets added to the <i>TrenchBroomGameConfig</i> resource. It does not affect appearance or functionality in Godot. See the TrenchBroom Documentation on <a href=https://trenchbroom.github.io/manual/latest/#game_configuration_files target=_blank>Tags under the Game Configuration section</a> for more information.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Tag Name</td><td>String</td><td>Name to define this tag. Not used as the matching pattern.</td></tr><tr><td>Tag Attributes</td><td>Array[String]</td><td>The attributes applied to matching faces or brush entities. Only "_transparent" is supported in TrenchBroom, which makes matching faces or brush entities transparent.</td></tr><tr><td>Tag Match Type</td><td>TagMatchType</td><td>Determines how the tag is matched. If set to <i>TagMatchType.TEXTURE</i>, the tag applies to any brush face with a texture matching the Texture Name. If set to <i>TagMatchType.CLASSNAME</i>, the tag applies to any brush entity with a classname matching the Tag Pattern.</td></tr><tr><td>Tag Pattern</td><td>String</td><td>A string that filters which flag, param, or classname to use. <b>*</b> can be used as a wildcard to include multiple options.<br>For example, a Tag Pattern of "trigger_*" with a TagMatchType <i>Classname</i> will apply this tag to all brush entities whose classnames begin with "trigger_".</td></tr><tr><td>Texture Name</td><td>String</td><td>A string that filters which textures recieve these attributes. Only used with a TagMatchType of <i>Texture</i>.</td></tr></table></div></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=NetradiantCustomResources main><h1 class=center>NetRadiant Custom Resources</h1><p>FuncGodot has limited support for NetRadiant Custom. All standard entity types and shaders are supported. Patches are unsupported at this time, and <a href=#BitFlags>bit flag key values are restricted to a single <i>spawnflags</i> key</a>. FuncGodot offers two resources to help configure NetRadiant Custom gamepacks.</p><hr><div id=GamepackConfig><h2>NetRadiantCustomGamepackConfig</h2><p><img src=images/ref_nrc_gamepackconfig.png></p><p>Builds a gamepack for NetRadiant Custom.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Export File</td><td>Bool</td><td>Button to export / update this gamepack's configuration in the NetRadiant Custom Gamepacks Folder.</td></tr><tr><td>Gamepack Name</td><td>String</td><td>Gamepack folder and file name. Must be lower case and must not contain special characters.</td></tr><tr><td>Game Name</td><td>String</td><td>Name of the game in NetRadiant Custom's gamepack list.</td></tr><tr><td>Base Game Path</td><td>String</td><td>Directory path containing your maps, textures, shaders, etc... relative to your project directory.</td></tr><tr><td>Fgd File</td><td>FuncGodotFGDFile</td><td>FGD resource to include with this gamepack. If using multiple FGD resources, this should be the master FGD that contains them in the <i>base_fgd_files</i> resource array.</td></tr><tr><td>Netradiant Custom Shaders</td><td>Array[Resource]</td><td><i>NetRadiantCustomShader</i> resources for shader file generation.</td></tr><tr><td>Texture Types</td><td>PackedStringArray</td><td>Supported texture file types.</td></tr><tr><td>Model Types</td><td>PackedStringArray</td><td>Supported model file types.</td></tr><tr><td>Sound Types</td><td>PackedStringArray</td><td>Supported audio file types.</td></tr><tr><td>Default Scale</td><td>String</td><td>Default scale of textures in NetRadiant Custom.</td></tr><tr><td>Clip Texture</td><td>String</td><td>Clip texture path that gets applied to weapclip and nodraw shaders.</td></tr><tr><td>Skip Texture</td><td>String</td><td>Skip texture path that gets applied to caulk and nodrawnonsolid shaders.</td></tr></table></div></div><hr><div id=Shader><h2>NetRadiantCustomShader</h2><p><img src=images/ref_nrc_shader.png></p><p>Resource that gets built into a shader file that applies a special effect to a specified texture in NetRadiant Custom.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Texture Path</td><td>String</td><td>Path to texture without extension, eg: `textures/special/clip`.</td></tr><tr><td>Shader Attributes</td><td>Array[String]</td><td>Array of shader properties to apply to faces using <i>Texture Path</i>.</td></tr></table></div></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=FuncGodotMap main><h1 class=center>FuncGodot Map Node</h1><p><img src=images/ref_func_godot_map.png></p><p>A scene generator node that parses a Quake map file using a <a href=#File>FuncGodotFGDFile</a>. Uses a <a href=#MapSettings>FuncGodotMapSettings</a> resource to define map build settings.</p><p><img src=images/ref_func_godot_map2.png></p><p>To use this node, select an instance of the node in the Godot editor and select <b>Quick Build</b>, <b>Full Build</b>, or <b>Unwrap UV2</b> from the toolbar. Alternatively, call <b>manual_build()</b> from code.</p><br><h3>Signals</h3><div class=scroller><table class=props><tr class=header><td>Signal</td><td>Description</td></tr><tr><td>build_complete</td><td>Emitted when the build process succesfully completes.</td></tr><tr><td>build_progress(step, progress)</td><td>Emitted when the build process finishes a step. Progress is a value between 0.0 and 1.0.</td></tr><tr><td>build_failed</td><td>Emitted when the build process fails.</td></tr><tr><td>unwrap_uv2_complete</td><td>Emitted when the UV2 unwrapping is completed.</td></tr></table></div><h3>Properties</h3><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr class=header><td>Map</td><td></td><td></td></tr><tr><td>Local Map File</td><td>String, Local File</td><td>Local path to Quake map file to build a scene from.</td></tr><tr><td>Global Map File</td><td>String, Global File</td><td>Global path to Quake map file to build a scene from. Overrides <i>Local Map File</i>.</td></tr><tr><td>Map Settings</td><td><a href=#MapSettings>FuncGodotFGDMapSettings</a></td><td>Map settings resource that defines map build scale, textures location, and more.</td></tr><tr class=header><td>Build</td><td></td><td></td></tr><tr><td>Print Profiling Data</td><td>Bool</td><td>If true, print profiling data before and after each build step.</td></tr><tr><td>Block Until Complete</td><td>Bool</td><td>If true, stop the whole editor until build is complete.</td></tr><tr><td>Set Owner Batch Size</td><td>Int</td><td>How many nodes to set the owner of, or add children of, at once. Higher values may lead to quicker build times, but a less responsive editor.</td></tr></table></div><hr><div id=MapSettings><h2>FuncGodotMapSettings</h2><p><img src=images/ref_func_godot_map_settings.png></p><p>Reusable map settings configuration for <i>FuncGodotMap</i> nodes.</p><br><div class=scroller><table class=props><tr class=header><td>Property</td><td>Type</td><td>Description</td></tr><tr><td>Inverse Scale Factor</td><td>Float</td><td>Ratio between map editor units and Godot units. FuncGodot will divide brush coordinates by this number when building. This does not affect entity properties unless scripted to do so.<br>See <a href=#InverseScaleFactor>Inverse Scale Factor</a> for more information.</td></tr><tr><td>Entity Fgd</td><td><a href=#File>FuncGodotFGDFile</a></td><td>Resource file that translates map file classnames into Godot nodes and packed scenes.</td></tr><tr><td>Entity Name Property</td><td>String</td><td>Default class property to use in naming generated nodes. This setting is overridden by <code>name_property</code> in <a href=#Entity>FuncGodotFGDEntityClass</a>. Naming occurs before adding to the <i>SceneTree</i> and applying properties. Nodes will be named <code>"entity_" + name_property</code>.<br><br><i>NOTE: Node names should be unique, otherwise you may run into unexpected behavior!</i></td></tr><tr class=header><td>Textures</td><td></td><td></td></tr><tr><td>Base Texture Dir</td><td>String</td><td>Base directory for textures. When building materials, FuncGodot will search this directory for texture files with matching names to the textures assigned to map brush faces.</td></tr><tr><td>Texture File Extensions</td><td>Array</td><td>File extensions to search for texture data.</td></tr><tr><td>Clip Texture</td><td>String</td><td>Optional path for the clip texture, relative to <i>Base Texture Dir</i>. Brush faces textured with the clip texture will have those faces removed from the generated <i>MeshInstance3D</i> but not the generated <i>CollisionShape3D</i>.</td></tr><tr><td>Skip Texture</td><td>String</td><td>Optional path for the skip texture, relative to <i>Base Texture Dir</i>. Brush faces textured with the skip texture will have those faces removed from the generated <i>MeshInstance3D</i>. If the <a href=#Solid>FuncGodotFGDSolidClass</a> <i>collision_shape_type</i> is set to concave then it will also remove collision from those faces in the generated <i>CollisionShape3D</i>.</td></tr><tr><td>Texture Wads</td><td>Array[Resource]</td><td>Optional <i>QuakeWADFile</i> resources to apply textures from. See the <a href=https://quakewiki.org/wiki/Texture_Wad target=_blank>Quake Wiki</a> for more information on Quake Texture WADs.</td></tr><tr><td>Materials</td><td></td><td></td></tr><tr><td>Material File Extension</td><td>String</td><td>File extension to search for <i>Material</i> definitions.</td></tr><tr><td>Unshaded</td><td>Bool</td><td>If true, all materials will be unshaded, ignoring light. Also known as "fullbright".</td></tr><tr><td>Default Material</td><td>Material</td><td>Material used as a template when generating missing materials.</td></tr><tr><td>Default Material Albedo Uniform</td><td>String</td><td><a href=https://docs.godotengine.org/en/stable/tutorials/shaders/shader_reference/shading_language.html#data-types target=_blank>Sampler2D</a> uniform that supplies the Albedo in a custom shader when <i>Default Material</i> is a <a href=https://docs.godotengine.org/en/stable/classes/class_shadermaterial.html target=_blank>ShaderMaterial</a>.</td></tr><tr><td>Normal Map Pattern</td><td>String</td><td>Automatic PBR material generation normal map pattern.</td></tr><tr><td>Metallic Map Pattern</td><td>String</td><td>Automatic PBR material generation metallic map pattern.</td></tr><tr><td>Roughness Map Pattern</td><td>String</td><td>Automatic PBR material generation roughness map pattern.</td></tr><tr><td>Emission Map Pattern</td><td>String</td><td>Automatic PBR material generation emission map pattern.</td></tr><tr><td>Ao Map Pattern</td><td>String</td><td>Automatic PBR material generation ambient occlusion map pattern.</td></tr><tr><td>Height Map Pattern</td><td>String</td><td>Automatic PBR material generation height map pattern.</td></tr><tr><td>Save Generated Materials</td><td>Bool</td><td>Save automatically generated materials to disk, allowing reuse across <i>FuncGodotMap</i> nodes.<br><i>NOTE: Materials do not use the Default Material settings after saving.</i></td></tr><tr><td>UV Unwrap</td><td></td><td></td></tr><tr><td>Uv Unwrap Texel Size</td><td>Float</td><td>Texel size for UV2 unwrapping. Actual texel size is uv_unwrap_texel_size / inverse_scale_factor. A ratio of 1/16 is usually a good place to start with (if inverse_scale_factor is 32, start with a uv_unwrap_texel_size of 2). Larger values will produce less detailed lightmaps. To conserve memory and filesize, use the largest value that still looks good.</td></tr><tr><td>TrenchBroom</td><td></td><td></td></tr><tr><td>Use Trenchbroom Groups Hierarchy</td><td>Bool</td><td>If true, will organize Scene Tree using Trenchbroom Layers and Groups. Layers and Groups will be generated as <i>Node3Ds</i>. All structural brushes will be moved out of the Layers and Groups and merged into the Worldspawn entity. Additionally, any Layers toggled to be omitted from export in TrenchBroom will be freed on map build before the Layers' children can apply <code>func_godot_properties</code> or call <code>_func_godot_apply_properties()</code> and <code>_func_godot_build_complete()</code>.</td></tr></table></div></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=Naming main><h1 class=center>Naming Patterns</h1><p>Recall that every entity has a <b>classname</b> that we define in our Entity Definition resource. One important consideration to make is that <i>naming conventions matter</i>. The first word of an entity's name up until the first underscore will be provided its own group in the map editor. Taking advantage of this can help keep your entities organized in a few spots and in some editors provide convenient filtering options.</p><p class=center><img src=images/tips_naming_1.png width=48%> <img src=images/tips_naming_2.png width=48%></p><p>When combined with <a href=#Tag>brush tags</a> in TrenchBroom configurations, this feature gains additional powers like in-editor transparency and keyboard shortcuts.</p><p class=center><img src=images/tips_naming_3.png width=48%> <img src=images/tips_naming_4.png width=48%></p><p>FuncGodot has a pair of prebuilt TrenchBroomTag resources for <b>func*</b> and <b>trigger*</b> brush classes. Feel free to use these either directly or as a base for your own brush tags.</p><p>Additionally, your map editor will also handle Point Class orientation through the key value pairs <b>angle</b> and <b>mangle</b> differently depending upon the classname. Setting the mangle for an entity type in the "light_*" group or with the "info_intermission" classname will have altered orientation behavior. To see the differences, try to parse the code block in <a href=#GuncGodotMap>FuncGodotMap</a> that handles translating Quake angles into Godot rotations:</p><p class=center><img src=images/tips_naming_angles.png alt="Image showing how node rotation is calculated by the FuncGodotMap."></p><p>Anyway, just make sure to give a little bit more thought to your naming conventions.</p><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=Worldspawn main><h1 class=center>Why Not Worldspawn?</h1><div id=WhatIsWorldspawn><h3>First things first... What <i>IS</i> Worldspawn?</h3><p><a href=#DefaultEntities>As mentioned before</a>, FuncGodot comes with a set of example Entity Definitions, including one for the <i>worldspawn</i> class that comes built-in to every Quake map file. But what <i>is</i> <b>worldspawn</b>?</p><p>Every Quake map file contains a list of entities containing a set of key value pairs. Some optionally include brush definitions. In Quake, the entity's <b>classname</b> is also the spawn function that is called upon map start. The very first entity that needs to load is the world, so entity 0 is always <b>worldspawn</b>. There can also only ever be one Worldspawn in a Quake map (with one weird exception I'll mention later).</p><p>Simply put, Worldspawn is just another entity. It's not even a Solid Entity by default. It needs to be defined in your FGD just like any other entity, too, or else it will revert to a simple <i>Node3D</i> with a mesh and no collision. The only special behavior Worldspawn has is that its position will <i>always</i> be the FuncGodotMap's position, unlike other Solid Entities.</p><p>The example Worldspawn entity is defined as a Solid Class StaticBody3D with convex collision, and the general understanding is that it's a built in mechanic of FuncGodot. Some of you need to have your stage geometry cut up for occlusion or per-collider purposes. In Tim's game <a href=https://store.steampowered.com/app/2115890/They_Came_From_Dimension_X/ target=_blank><i>They Came From Dimension X</i></a>, worldspawn was changed into a <a href=https://docs.godotengine.org/en/stable/classes/class_worldenvironment.html target=_blank>WorldEnvironment</a> that instantiates a <a href=https://docs.godotengine.org/en/stable/classes/class_lightmapgi.html target=_blank>LightmapGI</a> while also handling default music playback and other map-wide settings. You might think of a completely different use case for it.</p><blockquote><i>NOTE: Setting Worldspawn as a Point Class may have undefined side effects due to being able to place a second Worldspawn in your map. It is recommended that any Worldspawn definition be a Solid Class.</i></blockquote><p><i>So why not Worldspawn?</i></p></div><hr><div id=OcclusionCulling><h2>Occlusion Culling</h2><p>Performance on larger or heavily populated maps mostly. <a href=https://docs.godotengine.org/en/stable/tutorials/3d/occlusion_culling.html target=_blank>Godot culls objects by the VisualInstance</a>; in the case of our maps, this means mesh by mesh. In order to get better performance we'll need to split our map up into smaller chunks.</p><p>Meshes are generated on a per-entity basis: every brush in a Solid Entity is merged into a single mesh. Since Worldspawn is an entity, any brush that is a part of Worldspawn gets merged into the same mesh. If we want to split up our mesh, we need to split our Worldspawn into separate entities.</p><p>Remember: <a href=#FuncGodotIsNotABspCompiler>FuncGodot is not a BSP compiler</a>. This means mapping for Godot like you're mapping for Quake is counterproductive. Instead, make sure you give some thought to how you'll split up your geometry entities, and how the brush vertices meet with each other. In exchange for full automation, FuncGodot instead gives you full control.</p></div><hr><div id=SurfaceMaterials><h2>Surface "Materials"</h2><p>A common question a lot of Godot devs have is <i>how do I get the texture of the surface my character is stepping on or shooting?</i> and the answer is... you don't! Well, the short answer anyway. Since Godot's CollisionObjects are completely separate from the MeshInstance3Ds, there's no real good performant way to actually do it surface by surface. Any possible solutions that involve getting the stage mesh's texture on a particular face are just not worth it. But why work against the engine when you can work <i>with</i> it?</p><p>If we can control how our stage geometry is split up, we can also provide that stage geometry with key value properties, including one that supplies a <i>Material Type</i> that can easily be passed to any character stepping on or shooting it. This is something that can't be done with a singular Worldspawn entity.</p></div><hr><div id=LiveWithoutWorldspawn><h2>How Do I Live Without Worldspawn?</h2><p>You'll want to create a <a href=#Solid>Solid Class entity</a> that matches the <i>Worldspawn</i> entity definition. It's recommended that you change the <i>Spawn Type</i> to <b>ENTITY</b> though. Feel free to also add any <i>Class Properties</i> you feel would benefit your game's design. The world geometry solid class entity used in Tim's games is typically called <b>func_geo</b>. He never shuts up about it.</p></div><hr><div id=NewWorldspawn><h2>A World Alongside Worldspawn</h2><p>It would also help to create your own new <i>worldspawn</i> entity definition that doesn't build visuals or collision, so that you can more easily tell if that stage geometry was given its own <i>func_geo</i> or was accidentally left as worldspawn. Keep in mind that a Quake map file's first entity will always be <i>worldspawn</i>, and that all map editors will only allow you to have one that they make automatically.</p><p>With that in mind... why not a <i>WorldEnvironment</i>? Let's take a look at an example of how you might repurpose a Worldspawn for one.</p><p>In TrenchBroom we can have our `worldspawn` settings set up like this in our FGD. We're assuming you know how this is done by now, but if not <a href=#EntityClass>please go back and reread the section on Entities</a> near the beginning of the manual.</p><p align=center><img src=images/tips_worldspawn_env1.png><br></p><p>Then in Godot, when the map is built and the Worldspawn's <code>func_godot_properties</code> dictionary is set, it runs the <code>_func_godot_apply_properties(props)</code> method.</p><pre><code>@tool
extends WorldEnvironment
class_name Worldspawn

const LIGHT_LAYER_MASK: int = 31

@export var func_godot_properties: Dictionary = {}

func _func_godot_apply_properties(props: Dictionary) -> void:
    # WORLD ENVIRONMENT
    var env: Environment = Environment.new()
    # Base settings
    env.set_fog_enabled(false);
    env.set_tonemapper(Environment.TONE_MAPPER_FILMIC)
    env.set_glow_enabled(false)
    # Background
    env.set_background(Environment.BG_COLOR);
    if props.has("color_bg"):
        env.set_bg_color(props["color_bg"]);
    else:
        env.set_bg_color(Color());
    # Ambient light
    env.set_ambient_source(Environment.AMBIENT_SOURCE_COLOR);
    if props.has("color_ambient"):
        env.set_ambient_light_color(props["color_ambient"]);
    else:
        env.set_ambient_light_color(Color.hex(0xFFFFFFFF));
    if props.has("ambient_light"):
        env.set_ambient_light_energy(props["ambient_light"]);
    else:
        env.set_ambient_light_energy(0.0);
    env.set_ambient_light_sky_contribution(0.0)
    # Brightness setup
    env.set_adjustment_enabled(true)
    env.set_adjustment_brightness(1.0)
    set_environment(env)</code></pre><p>It doesn't stop there, by the way. You may have noticed a number of key value pairs in our TrenchBroom entity: <i>lit_bounces</i>, <i>lit_denoiser</i>, etc... Instead of manually creating the lightmap for each map, we can have our Worldspawn entity programmatically create and modify the <i>LightmapGI</i> node any time the map is built. To do this, we'll use the <code>_func_godot_build_complete()</code> method, automatically called as a deferred call at the end of the build process.</p><pre><code>func _func_godot_build_complete() -> void:
    # Find existing lightmap, else build a new one
    var lit: LightmapGI
    if get_owner().has_node("lightmap"):
        lit = get_owner().get_node("lightmap")
    else:
        lit = LightmapGI.new()
        lit.set_name("lightmap")
        get_owner().add_child(lit)
        lit.set_owner(get_owner())
    lit.get_parent().call_deferred("move_child", lit, 0);
    lit.set_layer_mask(LIGHT_LAYER_MASK)
    # Bake Quality
    if func_godot_properties.has("lit_quality"):
        lit.set_bake_quality(func_godot_properties["lit_quality"] as LightmapGI.BakeQuality)
    else:
        lit.set_bake_quality(LightmapGI.BakeQuality.BAKE_QUALITY_MEDIUM);
    # Bounces
    if func_godot_properties.has("lit_bounces"):
        lit.set_bounces(func_godot_properties["lit_bounces"] as int)
    else:
        lit.set_bounces(3);
    # Lightmapper Probes Subdivision
    if func_godot_properties.has("lit_probes_subdiv"):
        lit.set_generate_probes(func_godot_properties["lit_probes_subdiv"] as LightmapGI.GenerateProbes)
    else:
        lit.set_generate_probes(LightmapGI.GenerateProbes.GENERATE_PROBES_SUBDIV_8);
    # Use Denoiser
    if func_godot_properties.has("lit_denoiser"):
        lit.set_use_denoiser(func_godot_properties["lit_denoiser"] as bool);
    else:
        lit.set_use_denoiser(true);</code></pre><p>That's right: during the build process you can have your entities' properties affect other entities or nodes outside of the FuncGodotMap node. This is somewhat advanced Godot scripting, as you do need to understand a bit more about when objects will exist in the SceneTree, but it's an extremely powerful tool at your disposal.</p><p>Hopefully this little essay asking you to question the role of Worldspawn has gotten you thinking a bit more outside the box in regards to what you can do with FuncGodot. Be sure to join our Discord community and let us know what you did with <i>your</i> Worldspawn!</p></div><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=MultipleModels main><h1 class=center>Conditional Models in TrenchBroom</h1><p>Let's say we want to add a <i>misc_model</i> or <i>prop_dynamic</i> entity class. Wouldn't it be nice if we could change a property and have our map editor reflect that change?</p><p>TrenchBroom allows you to modify certain meta property options through the use of an entity's own properties. There is a great example of this in the <a href=https://github.com/TrenchBroom/TrenchBroom/blob/f2ed84da74107b7a021a972988ed333c990d9b02/app/resources/games/Quake/Quake.fgd target=_blank>TrenchBroom version of Quake's FGD file.</a> Let's look at an example with <b>item_health</b>, which uses <b>spawnflags</b> to determine if the item becomes a Medkit, a Rotten Medkit, or a Megahealth.</p><pre><code>@PointClass
size(0 0 0, 32 32 56)
base(Appearflags)
model(
    {{
        spawnflags & 2 ->   ":maps/b_bh100.bsp",
        spawnflags & 1 ->   ":maps/b_bh10.bsp",
                            ":maps/b_bh25.bsp"
    }}
) =
item_health : "Health pack"
[
spawnflags(flags) =
[
	1 : "Rotten" : 0
	2 : "Megahealth" : 0
]
]</code></pre><p>We can see that the pattern is essentially <code>property expression -> model path</code>. While this is fine done via flags, it might be better to use a choices if you have a lot of models you wish to choose from. A good template might be:</p><pre><code>model(
{{
    model_id == 1 -> "path": "path/to/model1.glb",
    model_id == 2 -> "path": "path/to/model2.glb",
    model_id == 3 -> "path": "path/to/model3.glb",
    "path": "path/to/model0.glb"    // default value
}}
) = point_entity : "Example point entity description"
[
model_id(choices) : "An example model enumerator" : "0" =
[
    0 : "Model 0"
    1 : "Model 1"
    2 : "Model 2"
    3 : "Model 3"
]
]</code></pre><p>We achieve this with a dictionary property we can call <b>model_id</b> and by adding an element to our <i>Meta Properties</i> dictionary with the key <b>model</b> and the String value <code class=highlight>{{ model_id == 1 -> "path": "path/to/model1.glb", model_id == 2 -> "path": "path/to/model2.glb", model_id == 3 -> "path": "path/to/model3.glb", "path": "path/to/model0.glb" }}</code>.</p><p>This doesn't affect the Godot entity that gets built. You'll still need to make your own script that handles the model swaps upon building in Godot. Should be pretty trivial to use a match statement utilizing your entity's <i>model_id</i> property though!</p><h1 class=nextpage><a>Next section</a></h1></div><div class=separator><img src=images/godot_ranger.svg alt="FuncGodot Ranger"></div><div id=HelpfulLinks main><h1 class=center>Helpful Links</h1><div id=Godot><h2>Godot and FuncGodot</h2><p><b><a href=https://discord.gg/eBQ7EfNZSZ target=_blank>Official FuncGodot Discord</a></b><br>If you've got questions on FuncGodot or Godot, we've got some extremely helpful community members who are generally happy to answer them. Be respectul and patient: we're all volunteers, doing this on our free time and out of a love for the community.</p><p><b><a href=https://github.com/orgs/func-godot/repositories target=_blank>FuncGodot Repositories</a></b><br>The official repositories contain helpful example projects that can show you how you might design your own games to take advantage of FuncGodot.</p><p><b><a href=https://docs.godotengine.org/en/stable/ target=_blank>Godot 4 Latest Stable Documentation</a></b><br>This may seem obvious or sarcastic, but this is probably the best source for almost all of the answers to almost all of your questions. This is your best friend. Most FuncGodot questions people have are really just Godot questions that don't involve FuncGodot at all. If you need to know how to do something in Godot, it's in this manual (literally).</p><p><b><a href="https://github.com/RhapsodyInGeek?tab=repositories" target=_blank>RhapsodyInGeek's GitHub Repositories</a></b><br>Tim often shares a lot of his work on GitHub, most of it licensed under <a href=https://creativecommons.org/public-domain/cc0/ target=_blank>Creative Commons Zero</a> and <a href=https://opensource.org/license/mit/ target=_blank>MIT</a>. Not all of it can be dragged and dropped into your own projects, but hopefully you'll come away from them learning something new.</p><p><b><a href=https://developer.valvesoftware.com/wiki/FGD target=_blank>Valve Developer Community Wiki's FGD Page</a></b><br>This is an extremely helpful resource in learning how FGD files work, and not just for Valve games or Hammer: it covers how FGD files are used by other editors too. If you want to take advantage of some more advanced features of FuncGodot's entity and configuration systems, it's helpful to study up on the FGD language that powers it.</p></div><hr><div id=TrenchBroomQ><h2>TrenchBroom and Quake</h2><p><b><a href="https://www.youtube.com/watch?v=gONePWocbqA&list=PLgDKRPte5Y0AZ_K_PZbWbgBAEt5xf74aE" target=_blank>Dumptruck_ds's TrenchBroom Tutorials</a></b><br>Some of these tutorials are a little bit dated as some features have changed a little, but overall these will teach you not only the fundamentals but get you acquainted with some of the more advanced techniques and improve your TrenchBroom workflow. You can also learn more about Quake map scripting, which might inspire some design patterns for your own game.</p><p><b><a href=https://www.youtube.com/@Slipseer target=_blank>Slipseer's TrenchBroom Tutorials</a></b><br>YouTube channel with some great tutorials. Not a lot on here, but what's here can definitely level up a novice mapper's skill set.</p><p><b><a href=https://www.slipseer.com/index.php target=_blank>Slipgate Sightseer</a></b><br>A very active and well done Quake modding and mapping site. Easy to navigate layout. Run by the best in the business. Check it out, even if just to get inspired by all the possibilities with TrenchBroom mapping. It's not just a lot of brown blocks (though those are cool, too).</p><p><b><a href="https://github.com/orgs/id-Software/repositories?type=all" target=_blank>id Software GitHub Repository</a></b><br>An incredible source for study. John Carmack began a trend a long while back of releasing the source code for id Software games, and this repository stretches as far back as <i>Wolfenstein 3D</i>. The most relevant repositories for you might be the Quake 1, 2, and 3 sources. Also provided are the Quake 1 QC files, the code for almost the entirety of the gameplay.</p><p><b><a href=https://discord.gg/f5Y99aM target=_blank>Quake Mapping Discord</a></b><br>Discord server where the best of the best hang out. If you have questions on Quake or TrenchBroom, mapping or modding, the people here can teach you everything you want to know about it.</p></div><hr><div id=JACKHL><h2>J.A.C.K. and Half-Life</h2><p><b><a href="https://www.youtube.com/watch?v=UaXDiaZYqcE&list=PLFf7-cW7rvxOgvFTt1clVQCGwUCamb54g" target=_blank>Lymphoid's Half-Life Mapping Tutorials</a></b><br>Not as hilarious as <a href="https://www.youtube.com/watch?v=eKzl87EDb2g&list=PLPQE9utdmjdvjnR_C0ZDBS4dEcK6bpYik">Dimbeak's tutorials</a> but Lymphoid's videos are a few years more relevant and have a fairly slower pace. Not everything is applicable to the J.A.C.K. > FuncGodot > Godot pipeline, but what can't be used directly could still be useful in knowing for your own implementations.</p><p><b><a href="https://www.youtube.com/watch?v=s4bsFHXSRug&list=PLVtRY5RXHuwaFImUfeoOhAN7rM3dAKxBg" target=_blank>Vhetutor's Tutorials</a></b><br>Many of these tutorials are for Hammer, but they give pretty great overviews of how scripted sequences are designed in a Half-Life map. Once again, not directly applicable but these tutorials could be very informative in trying to design your own scripted sequences, no matter your map editor.</p><p><b><a href=https://twhl.info/ target=_blank>The Whole Half-Life</a></b><br>A site dedicated to Half-Life level design and modding. Deep dive into the knowledge base of Half-Life modding, raid its vaults, and escape with new design patterns that you can use for your FuncGodot workflow.</p><p><b><a href=https://github.com/ValveSoftware/halflife target=_blank>Half-Life Source Code</a></b><br>Another incredible source for study. Half-Life does a lot of really interesting things with its design. Definitely take a peek through and see what you can learn.</p></div><hr><div id=Tools><h2>Useful Tools</h2><p><b><a href=https://www.aseprite.org/ target=_blank>Aseprite</a></b><br>The most important game dev tool you will ever purchase. It's a wonderful pixel paint program that trivializes sprite work and animation.</p><p><b><a href=https://krita.org/en/ target=_blank>Krita</a></b><br>Free and open source paint application that serves really well as an Adobe Photoshop alternative. I use this for my higher res image assets and concept art.</p><p><b><a href=https://www.materialmaker.org/ target=_blank>Material Maker</a></b><br>Really incredible open source procedural materials authoring tool made with Godot, available at the variable cost of name-your-own-price. Highly recommended by the community.</p></div><h1 class=nextpage><a>Next section</a></h1></div><div id=FAQ main><h1>Frequently Asked Questions</h1><p><a href=#WhyBlurryTex>Why are my textures blurry?!</a><br><a href=#CanIDo>Can I do...</a><br><a href=#SourceControl>How does FuncGodot handle source control?</a><br><a href=#LocalConfigWontExport>Why am I getting an error trying to export my Local Configuration?</a><br><a href=#EntitiesNotBuilding>Why are my new entities not building? Why can't I find them in my map editor?</a><br><a href=#NodesDisappeared>Help! I manually added some nodes to my FuncGodotMap and when I hit build again they all disappeared!</a><br><a href=#SplitMap>How do I split up my map? It only comes out as one big mesh</a><br><a href=#Overdraw>I'm getting a lot of overdraw, why doesn't FuncGodot get rid of unseen faces?</a><br><a href=#WhyBlurryTex2>Why are my textures blurry?!</a></p><hr><p id=WhyBlurryTex><b class=faq>Why are my textures blurry?!</b><br><a href=#WhyAreMyTexturesBlurry><b>Please don't skim the manual.</b></a></p><p id=CanIDo><b class=faq>Can I do...</b><br>Yes.</p><p id=SourceControl><b class=faq>How does FuncGodot handle source control?</b><br>All resources that need to access or reference global paths go through the <a href=#LocalConfig><b>FuncGodot Local Config</b></a> settings that are local to each machine. The various tool and project paths do need to be set per machine. Additionally, the FuncGodotMap has the option for using a local path to map files.</p><p id=LocalConfigWontExport><b class=faq>Why am I getting an error trying to export my Local Configuration?</b><br>You need to run your project at least once so that Godot can create the <b>user://</b> folder. This can be any scene. After the first run, you'll be able to export your Local Config.</p><p id=EntitiesNotBuilding><b class=faq>Why are my new entities not building? Why can't I find them in my map editor?</b><br>Double check to make sure you set a <a href=#Entity>Classname</a> in the entity resource before you exported the FGD. If this doesn't exist, FuncGodot will skip adding it to the FGD file and will only generate a <i>Node3D</i>.</p><p id=NodesDisappeared><b class=faq>Help! I manually added some nodes to my FuncGodotMap and when I hit build again they all disappeared!</b><br>FuncGodotMap nodes will always erase every child they have when rebuilt. There's no practical way for FuncGodot to confidently differentiate what it built, what was programmatically built as a result of its build, and what was hand placed by the user. If you feel the need to manually place nodes you should do so outside of the FuncGodotMap node in order to not lose any work.</p><p id=SplitMap><b class=faq>How do I split up my map? It only comes out as one big mesh</b><br>You're still mapping like you're compiling for the Quake engine. <a href=#Worldspawn>You need to map like your target is the Godot Engine.</a></p><p id=Overdraw><b class=faq>I'm getting a lot of overdraw, why doesn't FuncGodot get rid of unseen faces?</b><br>You're still mapping like you're compiling for the Quake engine. <a href=#OcclusionCulling>You need to map like your target is the Godot Engine.</a></p><p id=WhyBlurryTex2><b class=faq>Why are my textures blurry?!</b><br>...</p></div></div><script>function show_all(e){document.querySelectorAll("body [style]").forEach(e=>{e.removeAttribute("style")}),document.querySelector(".content").scrollTo({top:0,behavior:"smooth"}),0<window.location.toString().indexOf("#")&&window.history.pushState("","/",window.location.pathname)}function toggle_sidenav(){var e=document.querySelector(".list");"none"!=window.getComputedStyle(e).getPropertyValue("display")?e.style.display="none":e.style.display="block"}function build_next_page_links(){document.querySelectorAll("ul.list > li").forEach(t=>{let l=t.querySelector("a");if(null!==l){l=l.getAttribute("href");var t=Array.prototype.indexOf.call(t.parentNode.children,t),o=document.querySelector("ul.list");for(let e=t+1;e<o.childElementCount;++e){var r=o.children[e].querySelector("a");if(null!==r){var n=document.querySelector(l+" h1.nextpage a");null!==n&&(n.href=r.getAttribute("href"));break}}}})}function partition(r){if(r&&validate_query(r)){document.querySelectorAll("h1.nextpage").forEach(e=>{e.style.display="block"}),document.querySelectorAll("div.content div > hr").forEach(e=>{e.style.display="none"});let o=!0;document.querySelectorAll("ul.list > li").forEach(t=>{t.removeAttribute("style");var l=t.querySelectorAll("[href]");for(let e=0;e<l.length;++e)l[e].getAttribute("href")==r?(o=!1,t.style.backgroundColor="#26231f",l[e].style.fontWeight="800"):l[e].removeAttribute("style")}),o&&null!==(e=document.querySelector(r).closest("[main]").id)&&null!==(e=document.querySelector(`ul.list li a[href="#${e}"]`))&&(e.parentElement.style.backgroundColor="#26231f");var t=document.querySelectorAll("div.content > div");for(let e=0;e<t.length;++e)t[e].id&&("#"+t[e].id==r||t[e].querySelector(r))?t[e].removeAttribute("style"):t[e].style.display="none";var e=document.querySelector("div.content "+r),e=(null!==e&&e.scrollIntoView(),document.querySelector("#toggle")),e=window.getComputedStyle(e),l=document.querySelector("ul.list"),l=window.getComputedStyle(l);"none"!==e.getPropertyValue("display")&&"none"!==l.getPropertyValue("display")&&toggle_sidenav()}}function validate_query(e){try{return document.querySelector(e)?!0:(console.log("Cant find anchor: "+e),!1)}catch(e){console.error(e)}return!1}document.querySelector("header").addEventListener("click",show_all),document.querySelector(".all").addEventListener("click",show_all),document.querySelector("#toggle").addEventListener("click",toggle_sidenav),window.matchMedia("(max-width: 900px)").addEventListener("change",()=>{document.querySelector(".list").removeAttribute("style")}),window.addEventListener("DOMContentLoaded",()=>{build_next_page_links(),partition(window.location.hash)},!0),window.addEventListener("hashchange",()=>{partition(window.location.hash)},!0)</script></body></html>